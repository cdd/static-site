webpackJsonp([1],{125:function(t,e){e.getArg=function(t,e,n){if(e in t)return t[e];if(3===arguments.length)return n;throw new Error('"'+e+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,i=/^data:.+\,.+$/;function o(t){var e=t.match(n);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function r(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}function a(t){var n=t,i=o(t);if(i){if(!i.path)return t;n=i.path}for(var a,s=e.isAbsolute(n),l=n.split(/\/+/),u=0,c=l.length-1;c>=0;c--)"."===(a=l[c])?l.splice(c,1):".."===a?u++:u>0&&(""===a?(l.splice(c+1,u),u=0):(l.splice(c,2),u--));return""===(n=l.join("/"))&&(n=s?"/":"."),i?(i.path=n,r(i)):n}function s(t,e){""===t&&(t="."),""===e&&(e=".");var n=o(e),s=o(t);if(s&&(t=s.path||"/"),n&&!n.scheme)return s&&(n.scheme=s.scheme),r(n);if(n||e.match(i))return e;if(s&&!s.host&&!s.path)return s.host=e,r(s);var l="/"===e.charAt(0)?e:a(t.replace(/\/+$/,"")+"/"+e);return s?(s.path=l,r(s)):l}e.urlParse=o,e.urlGenerate=r,e.normalize=a,e.join=s,e.isAbsolute=function(t){return"/"===t.charAt(0)||n.test(t)},e.relative=function(t,e){""===t&&(t="."),t=t.replace(/\/$/,"");for(var n=0;0!==e.indexOf(t+"/");){var i=t.lastIndexOf("/");if(i<0)return e;if((t=t.slice(0,i)).match(/^([^\/]+:\/)?\/*$/))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)};var l=!("__proto__"in Object.create(null));function u(t){return t}function c(t){if(!t)return!1;var e=t.length;if(e<9)return!1;if(95!==t.charCodeAt(e-1)||95!==t.charCodeAt(e-2)||111!==t.charCodeAt(e-3)||116!==t.charCodeAt(e-4)||111!==t.charCodeAt(e-5)||114!==t.charCodeAt(e-6)||112!==t.charCodeAt(e-7)||95!==t.charCodeAt(e-8)||95!==t.charCodeAt(e-9))return!1;for(var n=e-10;n>=0;n--)if(36!==t.charCodeAt(n))return!1;return!0}function d(t,e){return t===e?0:null===t?1:null===e?-1:t>e?1:-1}e.toSetString=l?u:function(t){return c(t)?"$"+t:t},e.fromSetString=l?u:function(t){return c(t)?t.slice(1):t},e.compareByOriginalPositions=function(t,e,n){var i=d(t.source,e.source);return 0!==i?i:0!==(i=t.originalLine-e.originalLine)?i:0!==(i=t.originalColumn-e.originalColumn)||n?i:0!==(i=t.generatedColumn-e.generatedColumn)?i:0!==(i=t.generatedLine-e.generatedLine)?i:d(t.name,e.name)},e.compareByGeneratedPositionsDeflated=function(t,e,n){var i=t.generatedLine-e.generatedLine;return 0!==i?i:0!==(i=t.generatedColumn-e.generatedColumn)||n?i:0!==(i=d(t.source,e.source))?i:0!==(i=t.originalLine-e.originalLine)?i:0!==(i=t.originalColumn-e.originalColumn)?i:d(t.name,e.name)},e.compareByGeneratedPositionsInflated=function(t,e){var n=t.generatedLine-e.generatedLine;return 0!==n?n:0!==(n=t.generatedColumn-e.generatedColumn)?n:0!==(n=d(t.source,e.source))?n:0!==(n=t.originalLine-e.originalLine)?n:0!==(n=t.originalColumn-e.originalColumn)?n:d(t.name,e.name)},e.parseSourceMapInput=function(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(t,e,n){if(e=e||"",t&&("/"!==t[t.length-1]&&"/"!==e[0]&&(t+="/"),e=t+e),n){var i=o(n);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var l=i.path.lastIndexOf("/");l>=0&&(i.path=i.path.substring(0,l+1))}e=s(r(i),e)}return a(e)}},248:function(t,e,n){"use strict";(function(t){function n(e){this.WIDTH_BUFFER=70,this.HEIGHT_BUFFER=185,this.MIN_HEIGHT=300,this.MIN_WIDTH=400,this.plot=null,this.widget=t("#"+e),this.container=t("#miniApp-panels-main")}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.setup=function(){if(this.container){this._sizeWidget();var e=this;t(window).on("resize",function(){setTimeout(e.resize.bind(e),0)})}this.plot=new EJSC.Chart(this.widget[0],this.chartOptions()),t(this.resize.bind(this))},n.prototype.chartOptions=function(){return{show_legend:!1,legend_title:"Legend",title:"",axis_left:{caption:""},axis_bottom:{caption:""},axis_top:{border:{show:!0}},axis_right:{border:{show:!0}}}},n.prototype.resetZoom=function(t){this.plot.resetZoom(t)},n.prototype.downloadPDF=function(e,n){if(!this._loading()){var i=t("#pdfDownloadForm");0===i.length&&((i=t("<form method='POST' id='pdfDownloadForm' style='display: none;'></form>")).html("<input type='hidden' name='svg' id='pdfDownloadForm-svgField'>"),t("body").append(i)),i.attr("action",e),t("#pdfDownloadForm-svgField").val(this.plot.exportSVG()),n||i.submit()}},n.prototype._loading=function(){return t("#globalAjax").is(":visible")},n.prototype._draw=function(){this.plot.redraw()},n.prototype._sizeWidget=function(){this.widget.css({width:this._computeWidgetWidth()+"px",height:this._computeWidgetHeight()+"px"})},n.prototype._computeWidgetWidth=function(){return Math.max(this.container.width()-this.WIDTH_BUFFER,this.MIN_WIDTH)},n.prototype._computeWidgetHeight=function(){return Math.max(this.container.height()-this.HEIGHT_BUFFER,this.MIN_HEIGHT)},n.prototype.resize=function(){this._sizeWidget(),this._draw()},window.BasePlotter=n,e.default=n}).call(e,n(12))},609:function(t,e,n){var i=n(610),o=n(125),r=n(611).ArraySet,a=n(6871).MappingList;function s(t){t||(t={}),this._file=o.getArg(t,"file",null),this._sourceRoot=o.getArg(t,"sourceRoot",null),this._skipValidation=o.getArg(t,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new a,this._sourcesContents=null}s.prototype._version=3,s.fromSourceMap=function(t){var e=t.sourceRoot,n=new s({file:t.file,sourceRoot:e});return t.eachMapping(function(t){var i={generated:{line:t.generatedLine,column:t.generatedColumn}};null!=t.source&&(i.source=t.source,null!=e&&(i.source=o.relative(e,i.source)),i.original={line:t.originalLine,column:t.originalColumn},null!=t.name&&(i.name=t.name)),n.addMapping(i)}),t.sources.forEach(function(i){var r=i;null!==e&&(r=o.relative(e,i)),n._sources.has(r)||n._sources.add(r);var a=t.sourceContentFor(i);null!=a&&n.setSourceContent(i,a)}),n},s.prototype.addMapping=function(t){var e=o.getArg(t,"generated"),n=o.getArg(t,"original",null),i=o.getArg(t,"source",null),r=o.getArg(t,"name",null);this._skipValidation||this._validateMapping(e,n,i,r),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=r&&(r=String(r),this._names.has(r)||this._names.add(r)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:r})},s.prototype.setSourceContent=function(t,e){var n=t;null!=this._sourceRoot&&(n=o.relative(this._sourceRoot,n)),null!=e?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(n)]=e):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(t,e,n){var i=e;if(null==e){if(null==t.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');i=t.file}var a=this._sourceRoot;null!=a&&(i=o.relative(a,i));var s=new r,l=new r;this._mappings.unsortedForEach(function(e){if(e.source===i&&null!=e.originalLine){var r=t.originalPositionFor({line:e.originalLine,column:e.originalColumn});null!=r.source&&(e.source=r.source,null!=n&&(e.source=o.join(n,e.source)),null!=a&&(e.source=o.relative(a,e.source)),e.originalLine=r.line,e.originalColumn=r.column,null!=r.name&&(e.name=r.name))}var u=e.source;null==u||s.has(u)||s.add(u);var c=e.name;null==c||l.has(c)||l.add(c)},this),this._sources=s,this._names=l,t.sources.forEach(function(e){var i=t.sourceContentFor(e);null!=i&&(null!=n&&(e=o.join(n,e)),null!=a&&(e=o.relative(a,e)),this.setSourceContent(e,i))},this)},s.prototype._validateMapping=function(t,e,n,i){if(e&&"number"!==typeof e.line&&"number"!==typeof e.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0)||e||n||i)&&!(t&&"line"in t&&"column"in t&&e&&"line"in e&&"column"in e&&t.line>0&&t.column>=0&&e.line>0&&e.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:e,name:i}))},s.prototype._serializeMappings=function(){for(var t,e,n,r,a=0,s=1,l=0,u=0,c=0,d=0,h="",p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(t="",(e=p[f]).generatedLine!==s)for(a=0;e.generatedLine!==s;)t+=";",s++;else if(f>0){if(!o.compareByGeneratedPositionsInflated(e,p[f-1]))continue;t+=","}t+=i.encode(e.generatedColumn-a),a=e.generatedColumn,null!=e.source&&(r=this._sources.indexOf(e.source),t+=i.encode(r-d),d=r,t+=i.encode(e.originalLine-1-u),u=e.originalLine-1,t+=i.encode(e.originalColumn-l),l=e.originalColumn,null!=e.name&&(n=this._names.indexOf(e.name),t+=i.encode(n-c),c=n)),h+=t}return h},s.prototype._generateSourcesContent=function(t,e){return t.map(function(t){if(!this._sourcesContents)return null;null!=e&&(t=o.relative(e,t));var n=o.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},s.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(t.file=this._file),null!=this._sourceRoot&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.SourceMapGenerator=s},610:function(t,e,n){var i=n(6870);e.encode=function(t){var e,n="",o=function(t){return t<0?1+(-t<<1):0+(t<<1)}(t);do{e=31&o,(o>>>=5)>0&&(e|=32),n+=i.encode(e)}while(o>0);return n},e.decode=function(t,e,n){var o,r,a,s,l=t.length,u=0,c=0;do{if(e>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(r=i.decode(t.charCodeAt(e++))))throw new Error("Invalid base64 digit: "+t.charAt(e-1));o=!!(32&r),u+=(r&=31)<<c,c+=5}while(o);n.value=(s=(a=u)>>1,1===(1&a)?-s:s),n.rest=e}},611:function(t,e,n){var i=n(125),o=Object.prototype.hasOwnProperty,r="undefined"!==typeof Map;function a(){this._array=[],this._set=r?new Map:Object.create(null)}a.fromArray=function(t,e){for(var n=new a,i=0,o=t.length;i<o;i++)n.add(t[i],e);return n},a.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(t,e){var n=r?t:i.toSetString(t),a=r?this.has(t):o.call(this._set,n),s=this._array.length;a&&!e||this._array.push(t),a||(r?this._set.set(t,s):this._set[n]=s)},a.prototype.has=function(t){if(r)return this._set.has(t);var e=i.toSetString(t);return o.call(this._set,e)},a.prototype.indexOf=function(t){if(r){var e=this._set.get(t);if(e>=0)return e}else{var n=i.toSetString(t);if(o.call(this._set,n))return this._set[n]}throw new Error('"'+t+'" is not in the set.')},a.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)},a.prototype.toArray=function(){return this._array.slice()},e.ArraySet=a},6867:function(t,e,n){"use strict";n(6868),n(6876),n(6879),n(6880),n(6881),n(112),n(6882),n(6883),n(6884),n(6885),n(6886),n(6887),n(6888),n(6889),n(6890),n(6891),n(6892),n(248),n(6893),n(6894),n(6895),n(6896),n(6897),n(6898),n(6901),n(6902),n(6909),n(6910),n(6911)},6868:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.retreiveErrorDescription=a,e.onError=s;var i,o=n(6869),r=(i=o)&&i.__esModule?i:{default:i};function a(e){return function(e){return t.ajax({url:e.filename+".map",dataType:"text"})}(e).then(function(t){return function(t,e){return new r.default.SourceMapConsumer(t,e.filename+".map").originalPositionFor({line:e.lineno,column:e.colno})}(t,e)}).then(function(t){var n=t.source,i=t.line,o=t.column;return{message:e.message,source:n,line:i,column:o}})}function s(t){return a(t).then(function(t){ga("send","exception",{exDescription:JSON.stringify(t),exFatal:!0})}).catch(function(e){var n=e.fileName,i=e.lineNumber,o=e.columnNumber,r=e.stack,a=t.filename,s=t.message,l=t.lineno,u=t.colno;ga("send","exception",{exDescription:JSON.stringify({error:{fileName:n,lineNumber:i,columnNumber:o,stack:r},event:{filename:a,message:s,lineno:l,colno:u}}),exFatal:!0})})}t(window.addEventListener("error",s))}).call(e,n(12))},6869:function(t,e,n){e.SourceMapGenerator=n(609).SourceMapGenerator,e.SourceMapConsumer=n(6872).SourceMapConsumer,e.SourceNode=n(6875).SourceNode},6870:function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");e.encode=function(t){if(0<=t&&t<n.length)return n[t];throw new TypeError("Must be between 0 and 63: "+t)},e.decode=function(t){return 65<=t&&t<=90?t-65:97<=t&&t<=122?t-97+26:48<=t&&t<=57?t-48+52:43==t?62:47==t?63:-1}},6871:function(t,e,n){var i=n(125);function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}o.prototype.unsortedForEach=function(t,e){this._array.forEach(t,e)},o.prototype.add=function(t){var e,n,o,r,a,s;e=this._last,n=t,o=e.generatedLine,r=n.generatedLine,a=e.generatedColumn,s=n.generatedColumn,r>o||r==o&&s>=a||i.compareByGeneratedPositionsInflated(e,n)<=0?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(i.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.MappingList=o},6872:function(t,e,n){var i=n(125),o=n(6873),r=n(611).ArraySet,a=n(610),s=n(6874).quickSort;function l(t,e){var n=t;return"string"===typeof t&&(n=i.parseSourceMapInput(t)),null!=n.sections?new d(n,e):new u(n,e)}function u(t,e){var n=t;"string"===typeof t&&(n=i.parseSourceMapInput(t));var o=i.getArg(n,"version"),a=i.getArg(n,"sources"),s=i.getArg(n,"names",[]),l=i.getArg(n,"sourceRoot",null),u=i.getArg(n,"sourcesContent",null),c=i.getArg(n,"mappings"),d=i.getArg(n,"file",null);if(o!=this._version)throw new Error("Unsupported version: "+o);l&&(l=i.normalize(l)),a=a.map(String).map(i.normalize).map(function(t){return l&&i.isAbsolute(l)&&i.isAbsolute(t)?i.relative(l,t):t}),this._names=r.fromArray(s.map(String),!0),this._sources=r.fromArray(a,!0),this._absoluteSources=this._sources.toArray().map(function(t){return i.computeSourceURL(l,t,e)}),this.sourceRoot=l,this.sourcesContent=u,this._mappings=c,this._sourceMapURL=e,this.file=d}function c(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(t,e){var n=t;"string"===typeof t&&(n=i.parseSourceMapInput(t));var o=i.getArg(n,"version"),a=i.getArg(n,"sections");if(o!=this._version)throw new Error("Unsupported version: "+o);this._sources=new r,this._names=new r;var s={line:-1,column:0};this._sections=a.map(function(t){if(t.url)throw new Error("Support for url field in sections not implemented.");var n=i.getArg(t,"offset"),o=i.getArg(n,"line"),r=i.getArg(n,"column");if(o<s.line||o===s.line&&r<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=n,{generatedOffset:{generatedLine:o+1,generatedColumn:r+1},consumer:new l(i.getArg(t,"map"),e)}})}l.fromSourceMap=function(t,e){return u.fromSourceMap(t,e)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(t,e){var n=t.charAt(e);return";"===n||","===n},l.prototype._parseMappings=function(t,e){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(t,e,n){var o,r=e||null;switch(n||l.GENERATED_ORDER){case l.GENERATED_ORDER:o=this._generatedMappings;break;case l.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(t){var e=null===t.source?null:this._sources.at(t.source);return{source:e=i.computeSourceURL(a,e,this._sourceMapURL),generatedLine:t.generatedLine,generatedColumn:t.generatedColumn,originalLine:t.originalLine,originalColumn:t.originalColumn,name:null===t.name?null:this._names.at(t.name)}},this).forEach(t,r)},l.prototype.allGeneratedPositionsFor=function(t){var e=i.getArg(t,"line"),n={source:i.getArg(t,"source"),originalLine:e,originalColumn:i.getArg(t,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var r=[],a=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(a>=0){var s=this._originalMappings[a];if(void 0===t.column)for(var l=s.originalLine;s&&s.originalLine===l;)r.push({line:i.getArg(s,"generatedLine",null),column:i.getArg(s,"generatedColumn",null),lastColumn:i.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a];else for(var u=s.originalColumn;s&&s.originalLine===e&&s.originalColumn==u;)r.push({line:i.getArg(s,"generatedLine",null),column:i.getArg(s,"generatedColumn",null),lastColumn:i.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++a]}return r},e.SourceMapConsumer=l,u.prototype=Object.create(l.prototype),u.prototype.consumer=l,u.prototype._findSourceIndex=function(t){var e,n=t;if(null!=this.sourceRoot&&(n=i.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(e=0;e<this._absoluteSources.length;++e)if(this._absoluteSources[e]==t)return e;return-1},u.fromSourceMap=function(t,e){var n=Object.create(u.prototype),o=n._names=r.fromArray(t._names.toArray(),!0),a=n._sources=r.fromArray(t._sources.toArray(),!0);n.sourceRoot=t._sourceRoot,n.sourcesContent=t._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=t._file,n._sourceMapURL=e,n._absoluteSources=n._sources.toArray().map(function(t){return i.computeSourceURL(n.sourceRoot,t,e)});for(var l=t._mappings.toArray().slice(),d=n.__generatedMappings=[],h=n.__originalMappings=[],p=0,f=l.length;p<f;p++){var m=l[p],g=new c;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=a.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=o.indexOf(m.name)),h.push(g)),d.push(g)}return s(n.__originalMappings,i.compareByOriginalPositions),n},u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),u.prototype._parseMappings=function(t,e){for(var n,o,r,l,u,d=1,h=0,p=0,f=0,m=0,g=0,v=t.length,y=0,S={},b={},w=[],_=[];y<v;)if(";"===t.charAt(y))d++,y++,h=0;else if(","===t.charAt(y))y++;else{for((n=new c).generatedLine=d,l=y;l<v&&!this._charIsMappingSeparator(t,l);l++);if(r=S[o=t.slice(y,l)])y+=o.length;else{for(r=[];y<l;)a.decode(t,y,b),u=b.value,y=b.rest,r.push(u);if(2===r.length)throw new Error("Found a source, but no line and column");if(3===r.length)throw new Error("Found a source and line, but no column");S[o]=r}n.generatedColumn=h+r[0],h=n.generatedColumn,r.length>1&&(n.source=m+r[1],m+=r[1],n.originalLine=p+r[2],p=n.originalLine,n.originalLine+=1,n.originalColumn=f+r[3],f=n.originalColumn,r.length>4&&(n.name=g+r[4],g+=r[4])),_.push(n),"number"===typeof n.originalLine&&w.push(n)}s(_,i.compareByGeneratedPositionsDeflated),this.__generatedMappings=_,s(w,i.compareByOriginalPositions),this.__originalMappings=w},u.prototype._findMapping=function(t,e,n,i,r,a){if(t[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[n]);if(t[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[i]);return o.search(t,e,r,a)},u.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var e=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(e.generatedLine===n.generatedLine){e.lastGeneratedColumn=n.generatedColumn-1;continue}}e.lastGeneratedColumn=1/0}},u.prototype.originalPositionFor=function(t){var e={generatedLine:i.getArg(t,"line"),generatedColumn:i.getArg(t,"column")},n=this._findMapping(e,this._generatedMappings,"generatedLine","generatedColumn",i.compareByGeneratedPositionsDeflated,i.getArg(t,"bias",l.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===e.generatedLine){var r=i.getArg(o,"source",null);null!==r&&(r=this._sources.at(r),r=i.computeSourceURL(this.sourceRoot,r,this._sourceMapURL));var a=i.getArg(o,"name",null);return null!==a&&(a=this._names.at(a)),{source:r,line:i.getArg(o,"originalLine",null),column:i.getArg(o,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return null==t}))},u.prototype.sourceContentFor=function(t,e){if(!this.sourcesContent)return null;var n=this._findSourceIndex(t);if(n>=0)return this.sourcesContent[n];var o,r=t;if(null!=this.sourceRoot&&(r=i.relative(this.sourceRoot,r)),null!=this.sourceRoot&&(o=i.urlParse(this.sourceRoot))){var a=r.replace(/^file:\/\//,"");if("file"==o.scheme&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||"/"==o.path)&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(e)return null;throw new Error('"'+r+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(t){var e=i.getArg(t,"source");if((e=this._findSourceIndex(e))<0)return{line:null,column:null,lastColumn:null};var n={source:e,originalLine:i.getArg(t,"line"),originalColumn:i.getArg(t,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",i.compareByOriginalPositions,i.getArg(t,"bias",l.GREATEST_LOWER_BOUND));if(o>=0){var r=this._originalMappings[o];if(r.source===n.source)return{line:i.getArg(r,"generatedLine",null),column:i.getArg(r,"generatedColumn",null),lastColumn:i.getArg(r,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},e.BasicSourceMapConsumer=u,d.prototype=Object.create(l.prototype),d.prototype.constructor=l,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}}),d.prototype.originalPositionFor=function(t){var e={generatedLine:i.getArg(t,"line"),generatedColumn:i.getArg(t,"column")},n=o.search(e,this._sections,function(t,e){var n=t.generatedLine-e.generatedOffset.generatedLine;return n||t.generatedColumn-e.generatedOffset.generatedColumn}),r=this._sections[n];return r?r.consumer.originalPositionFor({line:e.generatedLine-(r.generatedOffset.generatedLine-1),column:e.generatedColumn-(r.generatedOffset.generatedLine===e.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})},d.prototype.sourceContentFor=function(t,e){for(var n=0;n<this._sections.length;n++){var i=this._sections[n].consumer.sourceContentFor(t,!0);if(i)return i}if(e)return null;throw new Error('"'+t+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(t){for(var e=0;e<this._sections.length;e++){var n=this._sections[e];if(-1!==n.consumer._findSourceIndex(i.getArg(t,"source"))){var o=n.consumer.generatedPositionFor(t);if(o)return{line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(t,e){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],r=o.consumer._generatedMappings,a=0;a<r.length;a++){var l=r[a],u=o.consumer._sources.at(l.source);u=i.computeSourceURL(o.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;l.name&&(c=o.consumer._names.at(l.name),this._names.add(c),c=this._names.indexOf(c));var d={source:u,generatedLine:l.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(o.generatedOffset.generatedLine===l.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:c};this.__generatedMappings.push(d),"number"===typeof d.originalLine&&this.__originalMappings.push(d)}s(this.__generatedMappings,i.compareByGeneratedPositionsDeflated),s(this.__originalMappings,i.compareByOriginalPositions)},e.IndexedSourceMapConsumer=d},6873:function(t,e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(t,n,i,o){if(0===n.length)return-1;var r=function t(n,i,o,r,a,s){var l=Math.floor((i-n)/2)+n,u=a(o,r[l],!0);return 0===u?l:u>0?i-l>1?t(l,i,o,r,a,s):s==e.LEAST_UPPER_BOUND?i<r.length?i:-1:l:l-n>1?t(n,l,o,r,a,s):s==e.LEAST_UPPER_BOUND?l:n<0?-1:n}(-1,n.length,t,n,i,o||e.GREATEST_LOWER_BOUND);if(r<0)return-1;for(;r-1>=0&&0===i(n[r],n[r-1],!0);)--r;return r}},6874:function(t,e){function n(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function i(t,e,o,r){if(o<r){var a=o-1;n(t,(c=o,d=r,Math.round(c+Math.random()*(d-c))),r);for(var s=t[r],l=o;l<r;l++)e(t[l],s)<=0&&n(t,a+=1,l);n(t,a+1,l);var u=a+1;i(t,e,o,u-1),i(t,e,u+1,r)}var c,d}e.quickSort=function(t,e){i(t,e,0,t.length-1)}},6875:function(t,e,n){var i=n(609).SourceMapGenerator,o=n(125),r=/(\r?\n)/,a="$$$isSourceNode$$$";function s(t,e,n,i,o){this.children=[],this.sourceContents={},this.line=null==t?null:t,this.column=null==e?null:e,this.source=null==n?null:n,this.name=null==o?null:o,this[a]=!0,null!=i&&this.add(i)}s.fromStringWithSourceMap=function(t,e,n){var i=new s,a=t.split(r),l=0,u=function(){return t()+(t()||"");function t(){return l<a.length?a[l++]:void 0}},c=1,d=0,h=null;return e.eachMapping(function(t){if(null!==h){if(!(c<t.generatedLine)){var e=(n=a[l]||"").substr(0,t.generatedColumn-d);return a[l]=n.substr(t.generatedColumn-d),d=t.generatedColumn,p(h,e),void(h=t)}p(h,u()),c++,d=0}for(;c<t.generatedLine;)i.add(u()),c++;if(d<t.generatedColumn){var n=a[l]||"";i.add(n.substr(0,t.generatedColumn)),a[l]=n.substr(t.generatedColumn),d=t.generatedColumn}h=t},this),l<a.length&&(h&&p(h,u()),i.add(a.splice(l).join(""))),e.sources.forEach(function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=o.join(n,t)),i.setSourceContent(t,r))}),i;function p(t,e){if(null===t||void 0===t.source)i.add(e);else{var r=n?o.join(n,t.source):t.source;i.add(new s(t.originalLine,t.originalColumn,r,e,t.name))}}},s.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(t){this.add(t)},this);else{if(!t[a]&&"string"!==typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);t&&this.children.push(t)}return this},s.prototype.prepend=function(t){if(Array.isArray(t))for(var e=t.length-1;e>=0;e--)this.prepend(t[e]);else{if(!t[a]&&"string"!==typeof t)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);this.children.unshift(t)}return this},s.prototype.walk=function(t){for(var e,n=0,i=this.children.length;n<i;n++)(e=this.children[n])[a]?e.walk(t):""!==e&&t(e,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(t){var e,n,i=this.children.length;if(i>0){for(e=[],n=0;n<i-1;n++)e.push(this.children[n]),e.push(t);e.push(this.children[n]),this.children=e}return this},s.prototype.replaceRight=function(t,e){var n=this.children[this.children.length-1];return n[a]?n.replaceRight(t,e):"string"===typeof n?this.children[this.children.length-1]=n.replace(t,e):this.children.push("".replace(t,e)),this},s.prototype.setSourceContent=function(t,e){this.sourceContents[o.toSetString(t)]=e},s.prototype.walkSourceContents=function(t){for(var e=0,n=this.children.length;e<n;e++)this.children[e][a]&&this.children[e].walkSourceContents(t);var i=Object.keys(this.sourceContents);for(e=0,n=i.length;e<n;e++)t(o.fromSetString(i[e]),this.sourceContents[i[e]])},s.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},s.prototype.toStringWithSourceMap=function(t){var e={code:"",line:1,column:0},n=new i(t),o=!1,r=null,a=null,s=null,l=null;return this.walk(function(t,i){e.code+=t,null!==i.source&&null!==i.line&&null!==i.column?(r===i.source&&a===i.line&&s===i.column&&l===i.name||n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:e.line,column:e.column},name:i.name}),r=i.source,a=i.line,s=i.column,l=i.name,o=!0):o&&(n.addMapping({generated:{line:e.line,column:e.column}}),r=null,o=!1);for(var u=0,c=t.length;u<c;u++)10===t.charCodeAt(u)?(e.line++,e.column=0,u+1===c?(r=null,o=!1):o&&n.addMapping({source:i.source,original:{line:i.line,column:i.column},generated:{line:e.line,column:e.column},name:i.name})):e.column++}),this.walkSourceContents(function(t,e){n.setSourceContent(t,e)}),{code:e.code,map:n}},e.SourceNode=s},6876:function(t,e,n){"use strict";(function(t){var e,i,r,a,s,l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=d(n(6877)),c=d(n(6878));function d(t){return t&&t.__esModule?t:{default:t}}var h=function t(){this.parentID=null,this.fontColor="#593216",this.minWidth=150,this.maxWidth=600,this.balloonTextSize="100%",this.delayTime=500,this.allowFade=!1,this.fadeIn=300,this.fadeOut=300,this.vOffset=25,this.padding=25,this.displayTime=!1,this.shadow=0,this.balloonImage=u.default,this.stem=!1,this.stemHeight=32,this.stemOverlap=3,this.closeButton=c.default,this.closeButtonWidth=16,document.onscroll=t.prototype.hideTooltip,window.onbeforeunload=function(){t.prototype.hideTooltip(1),s=!0},this.isIE()&&(this.suppress=!0)};h.prototype.toggleTooltip=function(t,e,n,o){if(i){var r=this.getEventTarget(t);if(this.isSameElement(r,this.firingElement))return void this.hideTooltip(1)}this.showTooltip(t,e,n,o)},h.prototype.showTooltip=function(t,n,o,a){if(this.isIE()&&document.readyState.match(/complete/i)&&(this.suppress=!1),this.suppress||s)return!1;this.isKonqueror()&&(this.allowFade=!1);var l=t.type.match("mouseover","i");if(l?this.fadeOK=this.allowFade:(o=!0,this.fadeOK=!1),i&&!r&&l)return!1;if(i&&r&&!o)return!1;var u=this.getEventTarget(t);if(o&&l&&this.isSameElement(u,this.currentElement))return!1;this.firingElement=u,o&&this.hideTooltip(1);if(l?u.onmouseout=function(){var t=r&&!i;h.prototype.hideTooltip(t)}:u.onmouseup=function(){return!1},r=o,this.width=a,this.hideTooltip(),this.isOldIE()&&this.ieImage&&(this.balloonImage=this.ieImage,this.ieImage=null),n.match(/^url:/)){var c=n.split(":");n="",this.activeUrl=c[1]}else if(n.match(/^load:/)){var d=n.split(":");document.getElementById(d[1])||alert("problem locating element "+d[1]),n=document.getElementById(d[1]).innerHTML,this.loadedFromElement=!0}else n.match(/^(https?:|\/|ftp:)\S+$/i)&&(this.activeUrl=n,n="");this.currentHelpText=this.getContents(n),this.loadedFromElement=!1,this.container?this.setStyle(this.container,"display","none"):(this.container=document.createElement("div"),document.body.appendChild(this.container),this.setStyle(this.container,"position","absolute"),this.setStyle(this.container,"top",-8888),this.setStyle(this.container,"display","none")),this.container.innerHTML=this.currentHelpText,e=this,this.setActiveCoordinates(t);var p=l?this.delayTime:1;this.timeoutTooltip=window.setTimeout(this.doShowTooltip,p)},h.prototype.doShowTooltip=function(){var n=e;if(i)return!1;n.parent||(n.parentID?n.parent=document.getElementById(n.parentID):n.parent=document.body,n.xOffset=n.getRegion(n.parent).left,n.yOffset=n.getRegion(n.parent).top),window.clearTimeout(n.timeoutFade),n.setStyle("balloon","display","none"),n.parseIntAll(),n.makeBalloon();var o=window.innerWidth,a=window.innerHeight,s=t(document).scrollLeft(),l=t(document).scrollTop(),u=s+Math.round(o/2),c=l+Math.round(a/2),d=n.activeTop>c?"up":"down",p=n.activeRight>u?"left":"right",f=n.container.innerHTML;if(n.contents.innerHTML=f,n.setBalloonStyle(d,p,o,s),r){var m=document.getElementById("topRight"),g=Math.round(n.padding/2),v=g+n.shadow+7+5,y=n.closeButtonWidth+1-g+10;m.innerHTML='      <img src="'+n.closeButton+'" title="Close"           style="padding:5px;position:absolute;top:'+v+"px;left:0px;          margin-left:-"+y+'px;cursor:pointer;z-index:3">',m.onclick=function(){h.prototype.hideTooltip(1)}}i=!0,n.showHide(),n.fade(1,95,n.fadeIn)},h.prototype.makeBalloon=function(){var t=e,n=document.getElementById("balloon");n&&t.parent.removeChild(n),(n=document.createElement("div")).setAttribute("id","balloon"),t.parent.appendChild(n),t.activeBalloon=n,t.parts=new Array(n);for(var i=new Array("contents","topRight","bottomRight","bottomLeft"),o=0;o<i.length;o++){var a=document.createElement("div");a.setAttribute("id",i[o]),n.appendChild(a),"contents"==i[o]&&(t.contents=a),t.parts.push(a)}return!r&&t.displayTime&&(t.timeoutAutoClose=window.setTimeout(this.hideTooltip,t.displayTime)),n},h.prototype.setBalloonStyle=function(t,n,i,o){var r=e,a=r.activeBalloon;"number"!=typeof r.shadow&&(r.shadow=0),r.stem||(r.stemHeight=0);var s=r.padding+r.shadow,l=r.padding;if(r.setStyle(a,"background","url("+r.balloonImage+") top left no-repeat"),r.setStyle(a,"position","absolute"),r.setStyle(a,"padding-top",s),r.setStyle(a,"padding-left",s),r.setStyle(a,"top",-9999),r.setStyle(a,"z-index",1e6),r.setStyle("bottomRight","background","url("+r.balloonImage+") bottom right no-repeat"),r.setStyle("bottomRight","position","absolute"),r.setStyle("bottomRight","right",0-s),r.setStyle("bottomRight","bottom",0-s),r.setStyle("bottomRight","height",s),r.setStyle("bottomRight","width",s),r.setStyle("bottomRight","z-index",-1),r.setStyle("topRight","background","url("+r.balloonImage+") top right no-repeat"),r.setStyle("topRight","position","absolute"),r.setStyle("topRight","right",0-s),r.setStyle("topRight","top",0),r.setStyle("topRight","width",s),r.setStyle("topRight","z-index",3),r.setStyle("bottomLeft","background","url("+r.balloonImage+") bottom left no-repeat"),r.setStyle("bottomLeft","position","absolute"),r.setStyle("bottomLeft","left",0),r.setStyle("bottomLeft","bottom",0-s),r.setStyle("bottomLeft","height",s),r.setStyle("bottomLeft","z-index",-1),"up"==t&&r.activeTop-r.vOffset-r.stemHeight-r.getRegion(a).height<30&&(t="down"),this.stem){var u,c=document.createElement("img");r.setStyle(c,"position","absolute"),a.appendChild(c),"up"==t&&"left"==n?(c.src=r.upLeftStem,u=r.stemHeight+l-r.stemOverlap,r.setStyle(c,"bottom",0-u),r.setStyle(c,"right",0)):"down"==t&&"left"==n?(c.src=r.downLeftStem,u=r.stemHeight-(r.shadow+r.stemOverlap),r.setStyle(c,"top",0-u),r.setStyle(c,"right",0)):"up"==t&&"right"==n?(c.src=r.upRightStem,u=r.stemHeight+l-r.stemOverlap,r.setStyle(c,"bottom",0-u),r.setStyle(c,"left",r.shadow)):"down"==t&&"right"==n&&(c.src=r.downRightStem,u=r.stemHeight-(r.shadow+r.stemOverlap),r.setStyle(c,"top",0-u),r.setStyle(c,"left",r.shadow))}if("left"==n){var d=i-r.activeLeft;r.setStyle(a,"right",d+r.xOffset)}else r.setStyle(a,"left",r.activeLeft-r.xOffset);if(r.width)r.setStyle(a,"width",r.width);else{var h=r.getRegion("contents").width;r.isIE()&&(h+=50),h>r.maxWidth&&(h=r.maxWidth+50),h<r.minWidth&&(h=r.minWidth),r.setStyle(a,"width",h)}var p=r.padding+r.shadow,f=r.getRegion(a).left,m=r.getRegion(a).right;"left"==n&&(f+=p),"right"==n&&(m+=p);var g=o+i;"right"==n&&m>g-30?r.setStyle(a,"width",g-f-50):"left"==n&&f<o+30&&r.setStyle(a,"width",m-o-50);var v,y=r.getRegion(a).width,S=r.getRegion(a).height;r.setStyle("topRight","height",S),r.setStyle("bottomLeft","width",y),"up"==t?(v=r.activeTop-r.vOffset-r.stemHeight-S,r.setStyle(a,"top",v-r.yOffset),r.setStyle(a,"display","inline")):(v=r.activeTop+r.vOffset+r.stemHeight,r.setStyle(a,"top",v-r.yOffset)),r.setStyle("contents","z-index",2),r.setStyle("contents","color",r.fontColor),r.setOpacity(1)},h.prototype.fade=function(t,n,i){var r=e||new h,a=Math.round(i/100),s=0;if(t>n)if(r.fadeOK){for(o=t;o>=n;o--)r.timeoutFade=setTimeout(h.prototype.setOpacity,s*a,o),s++;setTimeout(h.prototype.setStyle,i,"balloon","display","none")}else r.setStyle("balloon","display","none");else if(t<n&&r.fadeOK)for(o=t;o<=n;o++)r.timeoutFade=setTimeout(h.prototype.setOpacity,s*a,o),s++},h.prototype.setOpacity=function(t){var n=e;if(!n||!n.fadeOK)return!1;var i=parseFloat((t||0)/100),o=n.isIE()?"contents":"balloon",r=document.getElementById(o);if(!r)return!1;n.setStyle(r,"opacity",i),n.setStyle(r,"filter","alpha(opacity= "+t+")"),n.setStyle(r,"MozOpacity",i),n.setStyle(r,"KhtmlOpacity",i)},h.prototype.hideTooltip=function(t){if(t&&"object"==("undefined"===typeof t?"undefined":l(t))&&(t=!1),r&&!t)return!1;var n=e;if(n&&(window.clearTimeout(n.timeoutTooltip),window.clearTimeout(n.timeoutAutoClose)),r&&n&&(n.currentElement=null),i=!1,r=!1,n)n.activeBalloon&&(t||!n.fadeOK||n.isIE()?n.setStyle(n.activeBalloon,"display","none"):n.fade(95,0,n.fadeOut));else{var o=document.getElementById("balloon");o&&h.prototype.setStyle(o,"display","none")}h.prototype.showHide(1)},h.prototype.setActiveCoordinates=function(t){var n=e;if(!n)return!1;var i=t||window.event,o=n.eventXY(i);return n.activeTop=o[1]-10,n.activeLeft=o[0]-10,n.activeRight=n.activeLeft+20,n.activeBottom=n.activeTop+20,!0},h.prototype.eventXY=function(t){var e=new Array(2),n=t||window.event;return e[0]=n.pageX||n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e[1]=n.pageY||n.clientY+document.body.scrollTop+document.documentElement.scrollTop,e},h.prototype.getEventTarget=function(t){var e,n=t||window.event;return n.target?e=n.target:n.srcElement&&(e=n.srcElement),3==e.nodeType&&(e=e.parentNode),e},h.prototype.setStyle=function(e,n,i){if(!e)return!1;if(i&&n.match(/left|top|bottom|right|width|height|padding|margin/)&&(i+="px"),"object"!=("undefined"===typeof e?"undefined":l(e))&&(e=document.getElementById(e)),null==e)return!1;if("z-index"==n)e.style&&(e.style.zIndex=parseInt(i));else{var o={};o[n.replace(/-\w/,function(t){return t.slice(1).toUpperCase()})]=i,t(e).css(o).css(o)}},h.prototype.getRegion=function(e,n){var i=t("string"===typeof e?"#"+e:e),o={height:i.outerHeight(),width:i.outerWidth()},r=t(document).scrollLeft(),a=t(document).scrollTop(),s=i[0].getBoundingClientRect(),l=s.top+a,u=s.left+r;return{top:l,bottom:l+o.height,left:u,right:u+o.width,width:o.width,height:o.height}},h.prototype.parseIntAll=function(){this.padding=parseInt(this.padding),this.shadow=parseInt(this.shadow),this.stemHeight=parseInt(this.stemHeight),this.stemOverlap=parseInt(this.stemOverlap),this.vOffset=parseInt(this.vOffset),this.delayTime=parseInt(this.delayTime),this.width=parseInt(this.width),this.maxWidth=parseInt(this.maxWidth),this.minWidth=parseInt(this.minWidth),this.fadeIn=parseInt(this.fadeIn),this.fadeOut=parseInt(this.fadeOut)},h.prototype.showHide=function(t){var n,i,o=e||new h;if(o.isOldIE())if(t){if(a){for(n=0;n<a.length;n++)i=a[n].id||a[n].name,o.setStyle(a[n],"visibility","visible");a=null}}else{var r=document.getElementById("contents").getElementsByTagName("select"),s=new Object;for(n=0;n<r.length;n++)s[i=r[n].id||r[n].name]=1;a=new Array;var l=document.getElementsByTagName("select");for(n=0;n<l.length;n++)i=l[n].id||l[n].name,o.isOverlap(l[n],o.activeBalloon)&&!s[i]&&(a.push(l[n]),o.setStyle(l[n],"visibility","hidden"))}if(o.hide)for(var u=t?"inline":"none",c=0;c<o.hide.length;c++)o.isOverlap(o.activeBalloon,o.hide[c])&&o.setStyle(o.hide[c],"display",u)},h.prototype.isOverlap=function(t,e){if(!t||!e)return!1;var n=this.getRegion(t),i=this.getRegion(e);if(!n||!i)return!1;var o=Math.max(n.top,i.top),r=Math.max(n.left,i.left),a=Math.min(n.bottom,i.bottom),s=Math.min(n.right,i.right);return o>=a||r>=s?null:new Array(s-r,a-o)},h.prototype.isSameElement=function(t,e){if(!t||!e)return!1;var n=this.getRegion(t),i=this.getRegion(e);return n.left==i.left&&n.right==i.right&&n.top==i.top&&n.bottom==i.bottom},h.prototype.getContents=function(t){if(!this.helpUrl&&!this.activeUrl)return t;if(this.loadedFromElement)return t;var e,n=this.activeUrl||this.helpUrl;if(n+=this.activeUrl?"":"?section="+t,this.activeUrl=null,e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")){e.open("GET",n,!1);try{e.send(null)}catch(t){}return this.helpText=e.responseText||t,this.helpText}return t},h.prototype.isIE=function(){return document.all&&!window.opera},h.prototype.isOldIE=function(){if(-1==navigator.appVersion.indexOf("MSIE"))return!1;var t=navigator.appVersion.split("MSIE");return parseFloat(t[1])<7},h.prototype.isKonqueror=function(){return-1!=navigator.userAgent.indexOf("Konqueror")},window.balloon=new h}).call(e,n(12))},6877:function(t,e,n){t.exports=n.p+"_/assets/images/cdd30/layout/balloons/balloon-eecaf251f8e30f684afa919cf0959fc4.png"},6878:function(t,e,n){t.exports=n.p+"_/assets/images/cdd30/layout/balloons/close-308d6b659c0d4549f7d20e5ad41d1822.gif"},6879:function(t,e,n){"use strict";var i,o,r,a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};String.prototype.startsWith||(i=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),o={}.toString,r=function(t){if(null==this)throw TypeError();var e=String(this);if(t&&"[object RegExp]"==o.call(t))throw TypeError();var n=e.length,i=String(t),r=i.length,a=arguments.length>1?arguments[1]:void 0,s=a?Number(a):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),n);if(r+l>n)return!1;for(var u=-1;++u<r;)if(e.charCodeAt(l+u)!=i.charCodeAt(u))return!1;return!0},i?i(String.prototype,"startsWith",{value:r,configurable:!0,writable:!0}):String.prototype.startsWith=r),String.prototype.endsWith||function(){var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e={}.toString,n=function(t){if(null==this)throw TypeError();var n=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var i=n.length,o=String(t),r=o.length,a=i;if(arguments.length>1){var s=arguments[1];void 0!==s&&(a=s?Number(s):0)!=a&&(a=0)}var l=Math.min(Math.max(a,0),i)-r;if(l<0)return!1;for(var u=-1;++u<r;)if(n.charCodeAt(l+u)!=o.charCodeAt(u))return!1;return!0};t?t(String.prototype,"endsWith",{value:n,configurable:!0,writable:!0}):String.prototype.endsWith=n}(),"function"!=typeof Object.create&&(Object.create=function(){var t=function(){};return function(e){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=("undefined"===typeof e?"undefined":a(e)))throw TypeError("Argument must be an object");t.prototype=e;var n=new t;return t.prototype=null,n}}()),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!==typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<r;){var a;i in o&&(a=o[i],t.call(n,a,i,o)),i++}}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o})},6880:function(module,exports,__webpack_require__){"use strict";var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.JSON||(window.JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,a,s=gap,l=e[t];switch(l&&"object"==("undefined"===typeof l?"undefined":_typeof(l))&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),"undefined"===typeof l?"undefined":_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;n<r;n+=1)a[n]=str(n,l)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==("undefined"===typeof rep?"undefined":_typeof(rep)))for(r=rep.length,n=0;n<r;n+=1)"string"==typeof(i=rep[n])&&((o=str(i,l))&&a.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.hasOwnProperty.call(l,i)&&((o=str(i,l))&&a.push(quote(i)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==("undefined"===typeof e?"undefined":_typeof(e))&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==("undefined"===typeof o?"undefined":_typeof(o)))for(n in o)Object.hasOwnProperty.call(o,n)&&(void 0!==(i=walk(o,n))?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){var n=t.History=t.History||{};if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(t){return t._uid||(t._uid=n.Adapter._uid++)},bind:function(t,e,i){var o=n.Adapter.uid(t);n.Adapter.handlers[o]=n.Adapter.handlers[o]||{},n.Adapter.handlers[o][e]=n.Adapter.handlers[o][e]||[],n.Adapter.handlers[o][e].push(i),t["on"+e]=function(t,e){return function(i){n.Adapter.trigger(t,e,i)}}(t,e)},trigger:function(t,e,i){i=i||{};var o,r,a=n.Adapter.uid(t);for(n.Adapter.handlers[a]=n.Adapter.handlers[a]||{},n.Adapter.handlers[a][e]=n.Adapter.handlers[a][e]||[],o=0,r=n.Adapter.handlers[a][e].length;o<r;++o)n.Adapter.handlers[a][e][o].apply(this,[i])},extractEventData:function(t,e){return e&&e[t]||void 0},onDomLoad:function(e){var n=t.setTimeout(function(){e()},2e3);t.onload=function(){clearTimeout(n),e()}}},"undefined"!=typeof n.init&&n.init()}(window),function(t,e){var n=t.document,i=t.setTimeout||i,o=t.clearTimeout||o,r=t.setInterval||r,a=t.History=t.History||{};if("undefined"!=typeof a.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");a.initHtml4=function(){if("undefined"!=typeof a.initHtml4.initialized)return!1;a.initHtml4.initialized=!0,a.enabled=!0,a.savedHashes=[],a.isLastHash=function(t){return t===a.getHashByIndex()},a.saveHash=function(t){return!a.isLastHash(t)&&(a.savedHashes.push(t),!0)},a.getHashByIndex=function(t){return"undefined"==typeof t?a.savedHashes[a.savedHashes.length-1]:t<0?a.savedHashes[a.savedHashes.length+t]:a.savedHashes[t]},a.discardedHashes={},a.discardedStates={},a.discardState=function(t,e,n){var i,o=a.getHashByState(t);return i={discardedState:t,backState:n,forwardState:e},a.discardedStates[o]=i,!0},a.discardHash=function(t,e,n){var i={discardedHash:t,backState:n,forwardState:e};return a.discardedHashes[t]=i,!0},a.discardedState=function(t){var e=a.getHashByState(t);return a.discardedStates[e]||!1},a.discardedHash=function(t){return a.discardedHashes[t]||!1},a.recycleState=function(t){var e=a.getHashByState(t);return a.discardedState(t)&&delete a.discardedStates[e],!0},a.emulated.hashChange&&(a.hashChangeInit=function(){a.checkerFunction=null;var e,i,o,s,l="";return a.isInternetExplorer()?(e="historyjs-iframe",(i=n.createElement("iframe")).setAttribute("id",e),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),o="",s=!1,a.checkerFunction=function(){if(s)return!1;s=!0;var e=a.getHash()||"",n=a.unescapeHash(i.contentWindow.document.location.hash)||"";return e!==l?(l=e,n!==e&&(o=n=e,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=a.escapeHash(e)),a.Adapter.trigger(t,"hashchange")):n!==o&&(o=n,a.setHash(n,!1)),s=!1,!0}):a.checkerFunction=function(){var e=a.getHash();return e!==l&&(l=e,a.Adapter.trigger(t,"hashchange")),!0},a.intervalList.push(r(a.checkerFunction,a.options.hashChangeInterval)),!0},a.Adapter.onDomLoad(a.hashChangeInit)),a.emulated.pushState&&(a.onHashChange=function(e){var i,o=e&&e.newURL||n.location.href,r=a.getHashByUrl(o),s=null;return a.isLastHash(r)?(a.busy(!1),!1):(a.doubleCheckComplete(),a.saveHash(r),r&&a.isTraditionalAnchor(r)?(a.Adapter.trigger(t,"anchorchange"),a.busy(!1),!1):(s=a.extractState(a.getFullUrl(r||n.location.href,!1),!0),a.isLastSavedState(s)?(a.busy(!1),!1):(a.getHashByState(s),(i=a.discardedState(s))?(a.getHashByIndex(-2)===a.getHashByState(i.forwardState)?a.back(!1):a.forward(!1),!1):(a.pushState(s.data,s.title,s.url,!1),!0))))},a.Adapter.bind(t,"hashchange",a.onHashChange),a.pushState=function(e,i,o,r){if(a.getHashByUrl(o))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:r}),!1;a.busy(!0);var s=a.createStateObject(e,i,o),l=a.getHashByState(s),u=a.getState(!1),c=a.getHashByState(u),d=a.getHash();return a.storeState(s),a.expectedStateId=s.id,a.recycleState(s),a.setTitle(s),l===c?(a.busy(!1),!1):l!==d&&l!==a.getShortUrl(n.location.href)?(a.setHash(l,!1),!1):(a.saveState(s),a.Adapter.trigger(t,"statechange"),a.busy(!1),!0)},a.replaceState=function(t,e,n,i){if(a.getHashByUrl(n))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:i}),!1;a.busy(!0);var o=a.createStateObject(t,e,n),r=a.getState(!1),s=a.getStateByIndex(-2);return a.discardState(r,o,s),a.pushState(o.data,o.title,o.url,!1),!0}),a.emulated.pushState&&a.getHash()&&!a.emulated.hashChange&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(t,"hashchange")})},"undefined"!=typeof a.init&&a.init()}(window),function(t,e){var n=t.console||e,i=t.document,o=t.navigator,r=t.sessionStorage||!1,a=t.setTimeout,s=t.clearTimeout,l=t.setInterval,u=t.clearInterval,c=t.JSON,d=t.alert,h=t.History=t.History||{},p=t.history;if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"!=typeof h.Adapter&&("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.intervalList=[],h.clearAllIntervals=function(){var t,e=h.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)u(e[t]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var t,e,o,r,a,s="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(s?(t=(r=Array.prototype.slice.call(arguments)).shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[t,r]):n.log.apply(n,[t,r])):t="\n"+arguments[0]+"\n",e=1,o=arguments.length;e<o;++e){if("object"==("undefined"===typeof(a=arguments[e])?"undefined":_typeof(a))&&"undefined"!=typeof c)try{a=c.stringify(a)}catch(t){}t+="\n"+a+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(t),!0},h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=i.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e")&&n[0];);return t>4&&t}()},h.isInternetExplorer=function(){return h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.emulated={pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(t){for(var e in t)return!1;return!0},h.cloneObject=function(t){var e,n;return t?(e=c.stringify(t),n=c.parse(e)):n={},n},h.getRootUrl=function(){var t=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(t+=":"+i.location.port),t+="/"},h.getBaseHref=function(){var t=i.getElementsByTagName("base"),e="";return 1===t.length&&(e=t[0].href.replace(/[^\/]+$/,"")),(e=e.replace(/\/+$/,""))&&(e+="/"),e},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){return((h.getState(!1,!1)||{}).url||i.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,n){return/\./.test(t)?t:t+"/"})},h.getBasePageUrl=function(){return i.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,n){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},h.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e="undefined"==typeof e||e,/[a-z]+\:\/\//.test(t)||(n="/"===i?h.getRootUrl()+t.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+t:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+t:e?h.getBaseUrl()+t.replace(/^(\.\/)+/,""):h.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(t){var e=t,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),h.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var n=h.getLastSavedState();return!n&&e&&(n=h.createStateObject()),t&&((n=h.cloneObject(n)).url=n.cleanUrl||n.url),n},h.getIdByState=function(t){var e,n=h.extractId(t.url);if(!n)if(e=h.getStateString(t),"undefined"!=typeof h.stateToId[e])n=h.stateToId[e];else if("undefined"!=typeof h.store.stateToId[e])n=h.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[n]||"undefined"!=typeof h.store.idToState[n];);h.stateToId[e]=n,h.idToState[n]=t}return n},h.normalizeState=function(t){var e,n;return t&&"object"==("undefined"===typeof t?"undefined":_typeof(t))||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==_typeof(t.data)||(t.data={}),(e={}).normalized=!0,e.title=t.title||"",e.url=h.getFullUrl(h.unescapeString(t.url||i.location.href)),e.hash=h.getShortUrl(e.url),e.data=h.cloneObject(t.data),e.id=h.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!h.isEmptyObject(e.data),(e.title||n)&&(e.hash=h.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=h.getFullUrl(e.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},h.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=h.normalizeState(i)},h.getStateById=function(t){return t=String(t),h.idToState[t]||h.store.idToState[t]||e},h.getStateString=function(t){var e;return e={data:h.normalizeState(t).data,title:t.title,url:t.url},c.stringify(e)},h.getStateId=function(t){return h.normalizeState(t).id},h.getHashByState=function(t){return h.normalizeState(t).hash},h.extractId=function(t){var e;return(e=/(.*)\&_suid=([0-9]+)$/.exec(t))&&e[1]||t,(e?String(e[2]||""):"")||!1},h.isTraditionalAnchor=function(t){return!/[\/\?\.]/.test(t)},h.extractState=function(t,e){var n,i,o=null;return e=e||!1,(n=h.extractId(t))&&(o=h.getStateById(n)),o||(i=h.getFullUrl(t),(n=h.getIdByUrl(i)||!1)&&(o=h.getStateById(n)),!o&&e&&!h.isTraditionalAnchor(t)&&(o=h.createStateObject(null,null,i))),o},h.getIdByUrl=function(t){return h.urlToId[t]||h.store.urlToId[t]||e},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||e},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||e},h.hasUrlDuplicate=function(t){var e;return(e=h.extractState(t.url))&&e.id!==t.id},h.storeState=function(t){return h.urlToId[t.url]=t.id,h.storedStates.push(h.cloneObject(t)),t},h.isLastSavedState=function(t){var e=!1;return h.savedStates.length&&(e=t.id===h.getLastSavedState().id),e},h.saveState=function(t){return!h.isLastSavedState(t)&&(h.savedStates.push(h.cloneObject(t)),!0)},h.getStateByIndex=function(t){return"undefined"==typeof t?h.savedStates[h.savedStates.length-1]:t<0?h.savedStates[h.savedStates.length+t]:h.savedStates[t]},h.getHash=function(){return h.unescapeHash(i.location.hash)},h.unescapeString=function(e){for(var n,i=e;(n=t.unescape(i))!==i;)i=n;return i},h.unescapeHash=function(t){var e=h.normalizeHash(t);return e=h.unescapeString(e)},h.normalizeHash=function(t){return t.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(t,e){var n,o,r;return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:e}),!1):(n=h.escapeHash(t),h.busy(!0),(o=h.extractState(t,!0))&&!h.emulated.pushState?h.pushState(o.data,o.title,o.url,!1):i.location.hash!==n&&(h.bugs.setHash?(r=h.getPageUrl(),h.pushState(null,null,r+"#"+n,!1)):i.location.hash=n),h)},h.escapeHash=function(e){var n=h.normalizeHash(e);return n=t.escape(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=h.unescapeHash(e)},h.setTitle=function(t){var e,n=t.title;n||(e=h.getStateByIndex(0))&&e.url===t.url&&(n=e.title||h.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}return i.title=n,h},h.queues=[],h.busy=function(t){if("undefined"!=typeof t?h.busy.flag=t:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);h.busy.timeout=a(function t(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)0!==(n=h.queues[e]).length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=a(t,h.options.busyDelay))},h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(t){return t.callback.apply(t.scope||h,t.args||[])},h.pushQueue=function(t){return h.queues[t.queue||0]=h.queues[t.queue||0]||[],h.queues[t.queue||0].push(t),h},h.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),h.busy()?h.pushQueue(t):h.fireQueueItem(t),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(t){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=a(function(){return h.doubleCheckClear(),h.stateChanged||t(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var e=h.extractState(i.location.href);if(!h.isLastSavedState(e))return e||h.createStateObject(),h.Adapter.trigger(t,"popstate"),h},h.back=function(t){return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),p.go(-1),!0)},h.forward=function(t){return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),p.go(1),!0)},h.go=function(t,e){var n;if(t>0)for(n=1;n<=t;++n)h.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)h.back(e)}return h},h.emulated.pushState){var f=function(){};h.pushState=h.pushState||f,h.replaceState=h.replaceState||f}else h.onPopState=function(e,n){var o,r,a=!1,s=!1;return h.doubleCheckComplete(),(o=h.getHash())?((r=h.extractState(o||i.location.href,!0))?h.replaceState(r.data,r.title,r.url,!1):(h.Adapter.trigger(t,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):((s=(a=h.Adapter.extractEventData("state",e,n)||!1)?h.getStateById(a):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(i.location.href))||(s=h.createStateObject(null,null,i.location.href)),h.expectedStateId=!1,h.isLastSavedState(s)?(h.busy(!1),!1):(h.storeState(s),h.saveState(s),h.setTitle(s),h.Adapter.trigger(t,"statechange"),h.busy(!1),!0))},h.Adapter.bind(t,"popstate",h.onPopState),h.pushState=function(e,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(e,n,i);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.pushState(r.id,r.title,r.url),h.Adapter.trigger(t,"popstate")),!0},h.replaceState=function(e,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:o}),!1;h.busy(!0);var r=h.createStateObject(e,n,i);return h.isLastSavedState(r)?h.busy(!1):(h.storeState(r),h.expectedStateId=r.id,p.replaceState(r.id,r.title,r.url),h.Adapter.trigger(t,"popstate")),!0};if(r){try{h.store=c.parse(r.getItem("History.store"))||{}}catch(t){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(t,"beforeunload",h.clearAllIntervals),h.Adapter.bind(t,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(i.location.href,!0))),r&&(h.onUnload=function(){var t,e;try{t=c.parse(r.getItem("History.store"))||{}}catch(e){t={}}for(e in t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{},h.idToState)h.idToState.hasOwnProperty(e)&&(t.idToState[e]=h.idToState[e]);for(e in h.urlToId)h.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=h.urlToId[e]);for(e in h.stateToId)h.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=h.stateToId[e]);h.store=t,h.normalizeStore(),r.setItem("History.store",c.stringify(t))},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(t,"beforeunload",h.onUnload),h.Adapter.bind(t,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==o.vendor&&"Mozilla"!==(o.appCodeName||"")||(h.Adapter.bind(t,"hashchange",function(){h.Adapter.trigger(t,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(t,"hashchange")})))},h.init()}(window)},6881:function(t,e,n){"use strict";(function(t,n){function i(t,e,n,i,o,r,a,s,l){this.functionName=t,this.argumentList=e||"",this.descriptionText=n||"",this.aggregationType=i||null,this.differentProtocol=o||!1,this.protocolCondition=r||!1,this.protocolId=a||null,this.shortName=s||null,this.numericOutputReadoutRowClass=l||"",this.identifier=null}function o(t,e,n,o,r,a,s,l,u){i.call(this,t,e,n,o,r,a,s,l,u)}function r(t,e,n,i,r,a,s,l,u){o.call(this,t,e,n,i,r,a,s,l,u)}function a(t,e,n,i,r){o.call(this,t,e,n,i,r)}function s(e,n,i,o){this.element=e,this.update=n,this.aggregation=i,this.aggregationSelect=this.aggregation.find("select:first"),this.hasFocus=!1,this.changed=!1,this.active=!1,this.index=0,this.entryCount=0,this.displayLimit=100,this.aggregationDropdown=this.aggregation.find("*:nth-child(2) > *:first-child"),this.batchRunText="",this.functionNames=[],this.hashedFunctionNames={},this.addAutoFormulaFunctions(o.functions||[]),this.addAutoFormulaReadoutDefinitions(o.readoutDefinitions||[]),this.addAutoFormulaProperties(o.properties||[]),this.batchRunValue=o.batchRunValue,this.ensureAggregationDisplayStatus(),this.setOptions(o),this.options.functionNames=this.functionNames,this.options.hashedFunctionNames=this.hashedFunctionNames,this.options.numericReadoutDefinitions=this.options.functionNames.filter(function(t){return t instanceof r&&""!==t.numericOutputReadoutRowClass}),this.options.conditionDefinitions=this.options.functionNames.filter(function(t){return t instanceof r&&t.protocolCondition}),this.options.chemicalProperties=this.options.functionNames.filter(function(t){return t instanceof a}),this.options.mathFunctions=this.options.functionNames.filter(function(t){return!(t instanceof a)&&!(t instanceof r)});var s,l=this.update,u=0;this.options.numericReadoutDefinitions.forEach(function(t){t.functionNameForDisplay().length>u&&(s=t),u=t.functionNameForDisplay().length}),this.functionNameMaxWidth=s.functionNameWidth(l),this.update.width(this.element.innerWidth()),this.originalWidth=this.update.width();var c=this.originalWidth-this.functionNameMaxWidth;this.offsetLeft=c<0?c:0,this.hiding=!1,this.options.paramName=this.options.paramName||this.element.name,this.options.tokens=this.options.tokens||[" ","(",")","*","/","\xf7","+","-","^"],this.options.frequency=this.options.frequency||.4,this.options.minChars=this.options.minChars||1,"string"==typeof this.options.tokens&&(this.options.tokens=new Array(this.options.tokens)),this.options.tokens.some(function(t){return"\n"==t})||this.options.tokens.push("\n"),this.observer=null,this.element.attr("autocomplete","off"),t(this.update).hide(),this.clickedOutside=!1,this.element.on("blur",this.onBlur.bind(this)),this.element.on("keydown",this.onKeyDown.bind(this)),this.element.on("keyup",this.ensureAggregationDisplayStatus.bind(this)),t(document).on("click",this.documentOnClick.bind(this))}Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFormulaFunction=i,e.AutoFormulaReadoutDefinition=r,e.AutoFormulaProperty=a,i.prototype.functionNameForMatching=function(){return this.functionName},i.prototype.functionNameForDisplay=function(){return this.functionName},i.prototype.functionNameWithParentheses=function(){return this.functionName+"()"},i.prototype.functionNameWithArgumentList=function(){return this.functionName+"(<i>"+this.argumentList+"</i>)"},i.prototype.escapeBrackets=function(t){return t.replace(/\\\[/g,"[").replace(/\\\]/g,"]")},i.prototype.functionNameForListItem=function(t,e){var n=this.functionNameForDisplay();return this.escapeBrackets("<strong>"+n.unescapeHTML().substr(0,e.length).escapeHTML()+"</strong>"+n.unescapeHTML().substr(e.length).escapeHTML())},i.prototype.functionNameForListItemForPartialMatch=function(t,e,n){var i=this.functionNameForDisplay();return this.escapeBrackets(i.unescapeHTML().substr(0,n).escapeHTML()+"<strong>"+i.unescapeHTML().substr(n,e.length).escapeHTML()+"</strong>"+i.unescapeHTML().substr(n+e.length).escapeHTML())},i.prototype.functionIdentiferForListItem=function(){return"<div class='identifier' style='display: none'>"+this.identifier+"<div>"},i.prototype.functionInformationForListItem=function(){return"<div class='descriptionText'>"+this.descriptionText+"</div><div class='argumentList'>"+this.functionNameWithArgumentList()+"</div>"+this.functionIdentiferForListItem()+"</li>"},i.prototype.createListItem=function(t,e,n){return"<li><div class='functionName functionNameNarrow'>"+(n=n||this.functionNameForListItem(t,e))+"</div>"+this.functionInformationForListItem()},i.prototype.createListItemForPartialMatch=function(t,e,n,i){return this.createListItem(t,e,this.functionNameForListItemForPartialMatch(t,e,n,i))},o.prototype=Object.create(i.prototype),o.prototype.unitForListItem=function(){return this.descriptionText.length>0?" ("+this.descriptionText+")":""},o.prototype.constructor=o,r.prototype=Object.create(o.prototype),r.prototype.functionNameWithParentheses=function(){return this.functionNameForMatching()},r.prototype.functionNameWidth=function(e){return textMeasurer.width(this.functionNameForDisplay(),t(e))},r.prototype.functionNameForMatching=function(){return(this.functionName.match(/^<span/)?this.functionName.match(/title="(.*?)"/)[1]:this.functionName).unescapeHTML()},r.prototype.functionNameForDisplay=function(){return this.functionName.match(/^<span/)?this.functionName.match(/>(.*?)<\/span>/)[1]:this.functionName},r.prototype.functionNameMatches=function(e){var n=e.split(/(\s|->)/).filter(function(e){return t.trim(e).length>0}).join(" ");return this.functionNameForMatching()==n},r.prototype.addMarkedUpFunctionName=function(t,e){if(t.match(/^<span/)){var n=t.match(/>(.*?)<\/span>/)[1];return t.replace(n,e)}return e},r.prototype.readoutDefinitionNameForListItem=function(t,e){var n=this.functionNameForListItem(t,e);return this.addMarkedUpFunctionName(t,n)},r.prototype.readoutDefinitionNameForListItemForPartialMatch=function(t,e,n,i){var o=this.functionNameForDisplay(),r=void 0;return r=-1==(i?o.toLowerCase().indexOf(e.escapeHTML().toLowerCase()):o.indexOf(e.escapeHTML()))?o:this.functionNameForListItemForPartialMatch(t,e,n),this.addMarkedUpFunctionName(t,r)},r.prototype.unitForListItem=function(){return this.descriptionText.length>0?" ("+this.descriptionText+")":""},r.prototype.createListItem=function(t,e,n){return"<li><div class='functionName'>"+(n=n||this.readoutDefinitionNameForListItem(t,e))+this.unitForListItem()+"</div>"+this.functionIdentiferForListItem()+"</li>"},r.prototype.createListItemForPartialMatch=function(t,e,n,i){return this.createListItem(t,e,this.readoutDefinitionNameForListItemForPartialMatch(t,e,n,i))},r.prototype.forceAggregation=function(){return this.differentProtocol&&("DetailRow"==this.numericOutputReadoutRowClass||"BatchRunAggregateRow"==this.numericOutputReadoutRowClass)},r.prototype.constructor=r,a.prototype=Object.create(o.prototype),a.prototype.functionNameWithParentheses=function(){return this.functionName},a.prototype.createListItem=function(t,e,n){return"<li><div class='functionName'>"+(n=n||this.functionNameForListItem(t,e))+this.unitForListItem()+"</div>"+this.functionIdentiferForListItem()+"</li>"},a.prototype.constructor=a,s.prototype.show=function(){if(this.update.is(":hidden")){if(!this.positionSet){var e={top:this.element.offset().top+this.element.outerHeight(),left:this.element.offset().left};this.offsetLeft<0&&(e.left=this.offsetLeft+e.left),this.update.css("position","absolute"),this.update.offset(e),this.update.width(this.update.width()-this.offsetLeft),this.positionSet=!0}this.hiding=!1,this.update.fadeIn(150)}!this.iefix&&t.browser.msie&&this.positionSet&&(this.update.after('<iframe id="'+this.update.attr("id")+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>'),this.iefix=t("#"+this.update.attr("id")+"_iefix")),this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},s.prototype.fixIEOverlapping=function(){var e=this.update.offset();this.iefix.offset(e),this.iefix.css("z-index",1),this.update.css("z-index",2),t(this.iefix).show()},s.prototype.hide=function(){this.hiding=!0,this.update.is(":visible")&&this.update.fadeOut(150,function(){this.hiding=!1}.bind(this)),this.iefix&&t(this.iefix).hide()},s.prototype.onKeyDown=function(e){if(e.shiftKey&&e.keyCode==t.ui.keyCode.COMMA){var n=this.readoutDefinitionForName(this.precedingReadoutDefinitionName());if(n){var i=this.protocolConditionsForProtocolId(n.protocolId);i.length>0&&(this.updateElementWithProtocolConditions(n,i),e.stopImmediatePropagation(),e.preventDefault())}}else if(this.active&&!this.hiding)switch(e.keyCode||e.which){case t.ui.keyCode.TAB:case t.ui.keyCode.ENTER:this.selectEntry(),e.stopImmediatePropagation(),e.preventDefault();case t.ui.keyCode.ESCAPE:return this.hide(),this.active=!1,e.stopImmediatePropagation(),void e.preventDefault();case t.ui.keyCode.UP:return this.markPrevious(),this.render(),e.stopImmediatePropagation(),void e.preventDefault();case t.ui.keyCode.DOWN:return this.markNext(),this.render(),e.stopImmediatePropagation(),void e.preventDefault()}else if(e.keyCode==t.ui.keyCode.ENTER||e.keyCode==t.ui.keyCode.TAB||t.browser.webkit>0&&0==e.keyCode)return;this.changed=!0,this.hasFocus=!0,this.observer&&clearTimeout(this.observer),this.observer=setTimeout(this.onObserverEvent.bind(this),1e3*this.options.frequency)},s.prototype.readoutDefinitionForName=function(t){if(t)return n.find(this.options.numericReadoutDefinitions,function(e){return e.functionNameForMatching()===t})},s.prototype.protocolConditionsForProtocolId=function(t){return this.options.conditionDefinitions.filter(function(e){return e.protocolId===t})},s.prototype.formatProtocolConditions=function(t){var e=t.filter(function(t){return t.protocolCondition});return e.length>0?"<"+e.sort(function(t,e){return t.functionName.localeCompare(e.functionName)}).map(function(t){return"["+t.shortName+']=""'}).join(",")+">":null},s.prototype.precedingReadoutDefinitionName=function(){var t=this.element.val().substring(0,this.getCaretPosition()),e=t.search(/\]\s*$/);if(e<=0||"\\"==t[e-1])return null;var n=e;do{n=t.lastIndexOf("[",n-1)}while(n>0&&"\\"==t[n-1]);return n<0?null:t.substring(n+1,e)},s.prototype.ensureAggregationDisplayStatus=function(e){!0===this.currentFormulaHasAggregation(this.element.val())?(this.aggregationDropdown.attr("disabled",!1),this.currentFormulaContainsAggregationsFromDifferentProtocol(this.element.val())?this.removeBatchRunOption():this.addBatchRunOption(),t(this.aggregation).show()):(this.aggregationDropdown.val("batch and run"),t(this.aggregation).hide(),this.aggregationDropdown.attr("disabled",!0))},s.prototype.currentFormulaHasAggregation=function(t){var e=RegExp(this.aggregationFunctionNamesPattern,"i"),n=t.match(e);if(null===n)return!1;for(;null!==n;){var i=t.indexOf(n[0]);if(0===i)return!0;var o=t.substring(0,i),r=this.stringHasMatchedOpenBracket(o);if(!0===r)return r;n=(t=t.substring(o.length+n[0].length,t.length-1)).match(e)}},s.prototype.stringHasMatchedOpenBracket=function(t){var e=t.lastIndexOf("["),n=t.lastIndexOf("]");return-1===e&&-1===n||(-1===e||-1!==n)&&!(n<e)},s.prototype.currentFormulaContainsAggregationsFromDifferentProtocol=function(t){for(var e=RegExp(this.aggregationFunctionNamesPattern+"\\s*\\[((.+?)[^\\\\])\\]","i"),n=t.match(e);null!==n;){var i=n[2].trim(),o=t.indexOf(n[0]);if(this.functionNames.some(function(t){return t instanceof r&&t.functionNameMatches(i)&&t.differentProtocol}))return!0;var a=t.substring(0,o);n=(t=t.substring(a.length+n[0].length,t.length-1)).match(e)}return!1},s.prototype.removeBatchRunOption=function(){t("#"+this.aggregation.attr("id")+" select option").each(function(e,n){t(n).val()==this.batchRunValue&&(this.batchRunText=t(n).html(),t(n).remove())}.bind(this)),this.ensureAggregationOptionIsSet()},s.prototype.addBatchRunOption=function(){var e=!1;t("#"+this.aggregation.attr("id")+" select option").each(function(n,i){t(i).val()==this.batchRunValue&&(e=!0)}.bind(this)),e||(this.aggregationSelect.prepend("<option value='"+this.batchRunValue+"'>"+this.batchRunText+"</option>"),this.aggregationSelect[0].selectedIndex=0),this.ensureAggregationOptionIsSet()},s.prototype.ensureAggregationOptionIsSet=function(){this.aggregationSelect[0].selectedIndex<0&&(this.aggregationSelect[0].selectedIndex=0)},s.prototype.onHover=function(e){var n=t(e.target).closest("li");return this.index!=n[0].autocompleteIndex&&(this.index=n[0].autocompleteIndex,this.render()),e.stopImmediatePropagation(),e.preventDefault(),!1},s.prototype.onClick=function(e){if(!this.hiding){var n=t(e.target).closest("li");this.index=n[0].autocompleteIndex,this.selectEntry(),this.hide(),this.ensureAggregationDisplayStatus()}},s.prototype.documentOnClick=function(t){this.element.id!=t.target.id&&(this.clickedOutside=!0)},s.prototype.onBlur=function(t){var e=function(){this.clickedOutside?(this.clickedOutside=!1,this.blurChoices(t)):this.element.focus()}.bind(this);this.active&&setTimeout(e,200)},s.prototype.blurChoices=function(t){setTimeout(this.hide.bind(this),250),this.hasFocus=!1,this.active=!1},s.prototype.render=function(){if(this.entryCount>0){for(var t=0;t<this.entryCount;t++)this.index==t?this.getEntry(t).addClass("selected"):this.getEntry(t).removeClass("selected");this.hasFocus&&(this.entryCount>15?(this.update.height(275),this.update.css("overflow-y","scroll")):(this.update.height("inherit"),this.update.css("overflow-y","inherit")),this.show(),this.active=!0)}else this.active=!1,this.hide()},s.prototype.markPrevious=function(){this.index>0?this.index--:this.index=this.entryCount-1,this.scrollIntoViewIfNecessary(this.getEntry(this.index))},s.prototype.markNext=function(){this.index<this.entryCount-1?this.index++:this.index=0,this.scrollIntoViewIfNecessary(this.getEntry(this.index))},s.prototype.scrollIntoViewIfNecessary=function(t){this.isElementInViewport(t)||t[0].scrollIntoView(!1)},s.prototype.isElementInViewport=function(t){var e=t[0].getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},s.prototype.getEntry=function(e){return t(this.update.find("> *:first-child > *")[e])},s.prototype.getCurrentEntry=function(){return this.getEntry(this.index)},s.prototype.extractEntry=function(t){return this.options.hashedFunctionNames[t[0].lastChild.firstChild.data]},s.prototype.selectEntry=function(){this.active=!1,this.updateElement(this.extractEntry(this.getCurrentEntry()))},s.prototype.getCaretPosition=function(){var t=0;if(document.selection){this.element.focus();var e=document.selection.createRange();e.moveStart("character",-this.element.val().length),t=e.text.length}else(this.element[0].selectionStart||"0"==this.element[0].selectionStart)&&(t=this.element[0].selectionStart);return t},s.prototype.setCaretPosition=function(t){if(document.selection){this.element.focus();var e=document.selection.createRange();e.moveStart("character",-this.element.val().length),e.moveStart("character",t),e.collapse(),e.select()}else(this.element[0].selectionStart||"0"==this.element[0].selectionStart)&&(this.element[0].selectionStart=t,this.element[0].selectionEnd=t,this.element.focus())},s.prototype.updateChoices=function(t){var e=t.choices,n=t.moreResultsThanDisplayed;if(!this.changed&&this.hasFocus){if(this.update.html(e),this.update.toggleClass("truncated",n),this.update.find("> *:first-child > *").length>0){this.entryCount=this.update.find("> *:first-child > *").length;for(var i=0;i<this.entryCount;i++){var o=this.getEntry(i);o[0].autocompleteIndex=i,this.addObservers(o)}}else this.entryCount=0;this.index=0,1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):1==this.entryCount&&this.getToken()=="["+this.extractEntry(this.getCurrentEntry()).functionName+"]"?this.hide():this.render()}},s.prototype.addObservers=function(t){t.on("mouseover",this.onHover.bind(this)),t.on("click",this.onClick.bind(this))},s.prototype.onObserverEvent=function(){this.changed=!1,this.tokenBounds=null,this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide())},s.prototype.forceAggregationIfNeeded=function(t,e,i){if(t.forceAggregation()||i){var o=this.element.val().substr(0,this.getTokenBounds()[0]-1),r=n.find(["average","avg","geomean"],function(t){return o.endsWith(t)});if(r){var a=o.substring(0,o.length-r.length),s=this.element.val().substring(this.getTokenBounds()[0]-1),l=this.getCaretPosition()-r.length+t.aggregationType.length;return this.element.val(a+t.aggregationType+s),this.setCaretPosition(l),this.tokenBounds=null,e}return t.aggregationType+"("+e+")"}return e},s.prototype.updateElementWithProtocolConditions=function(t,e){var n=this.getCaretPosition(),i=this.getTokenBounds();if(-1!=n){var o=this.formatProtocolConditions(e);o=this.forceAggregationIfNeeded(t,"["+t.functionName.unescapeHTML()+"]"+o,!0);var r=this.element.val().substr(0,i[0]),a=this.element.val().substr(0,i[0]).match(/^\s+/);a&&(r+=a[0]);var s=this.element.val().substr(n);this.element.val(r+o+s),this.calculateCaretPositionAfterProtocolConditionUpdate(n)}},s.prototype.calculateCaretPositionAfterProtocolConditionUpdate=function(t){var e=this.element.val().substr(t).indexOf('"');this.setCaretPosition(t+e+1)},s.prototype.updateElement=function(t){if(this.options.updateElement)this.options.updateElement(t);else{var e="";e=t.functionNameWithParentheses(),this.getToken().startsWith("[")?(e="["+e+"]",e=this.forceAggregationIfNeeded(t,e)):this.getToken().startsWith("{")&&(e="{"+e+"}");var n=this.getTokenBounds();if(-1!=n[0]){var i=this.element.val().substr(0,n[0]),o=this.element.val().substr(n[0]).match(/^\s+/),s=t instanceof r||t instanceof a?0:-1;o&&(i+=o[0]),this.element.val(i+e+this.element.val().substr(n[1])),this.setCaretPosition((i+e).length+s)}else this.element.val(e);this.element.focus(),this.options.afterUpdateElement&&this.options.afterUpdateElement(this.element,t)}},s.prototype.getToken=function(){var e=this.getTokenBounds();return t.trim(this.element.val().substring(e[0],e[1]))},s.prototype.getTokenBounds=function(){var e=this.element.val();if(t.trim(e).length<=0)return[-1,0];for(var n,i=this.getCaretPosition(),o=-1,r=e.length,a=0,s=this.options.tokens.length;a<s;++a)(n=e.lastIndexOf(this.options.tokens[a],i-1))>o&&(o=n),-1!=(n=e.indexOf(this.options.tokens[a],i))&&n<r&&(r=n);return this.tokenBounds=[o+1,r],this.adjustTokenBoundsForVariable(e,i,"[","]"),this.adjustTokenBoundsForVariable(e,i,"{","}"),this.tokenBounds},s.prototype.adjustTokenBoundsForVariable=function(t,e,n,i){var o=t.lastIndexOf(n,e),r=t.lastIndexOf(i,e-1);(o>r||r==e-1&&-1!=o)&&(this.tokenBounds[0]=o);var a=t.indexOf(n,e+1),s=t.indexOf(i,e);-1!=s&&(-1==a||s<a)&&(this.tokenBounds[1]=s+1)},s.prototype.getUpdatedChoices=function(){this.updateChoices(this.options.selector(this,this.displayLimit))},s.prototype.setOptions=function(e){this.options={partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(t,e){var n,i=[],o=[],r=t.getToken(),a=!1;(r||"").startsWith("[")?(n=t.options.numericReadoutDefinitions,(r=r.substr(1)).endsWith("]")&&(r=r.substr(0,r.length-1))):r.startsWith("{")?(n=t.options.chemicalProperties,(r=r.substr(1)).endsWith("}")&&(r=r.substr(0,r.length-1))):n=t.options.mathFunctions;for(var s=0;s<n.length;s++){for(var l=n[s],u=l.functionNameForMatching(),c=l.functionName,d=t.options.ignoreCase?u.toLowerCase().indexOf(r.toLowerCase()):u.indexOf(r);-1!=d;){if(0==d&&u.length!=r.length){i.push(l.createListItem(c,r));break}if(r.length>=t.options.partialChars&&t.options.partialSearch&&-1!=d&&(t.options.fullSearch||/\s/.test(u.substr(d-1,1)))){o.push(l.createListItemForPartialMatch(c,r,d,t.options.ignoreCase));break}d=t.options.ignoreCase?c.toLowerCase().indexOf(r.toLowerCase(),d+1):c.indexOf(r,d+1)}if(o.length+i.length==e+1){a=!0;break}}return o.length&&(i=i.concat(o)),a&&i.pop(),{choices:"<ul>"+i.join("")+"</ul>",moreResultsThanDisplayed:a}}},t.extend(this.options,e||{})},s.prototype.addAutoFormulaProperties=function(t){t.forEach(function(t){var e=t.name,n=null,i=e.match(/^(.*?) \((.*?)\)/);null!==i&&(e=i[1],n=i[2]);var o=new a(e,"",n);this.addAutoFormulaFunction(o)}.bind(this))},s.prototype.addAutoFormulaFunction=function(t){var e=this.functionNames.length;if(this.functionNames.push(t),this.hashedFunctionNames[e.toString()]=t,t.identifier=e.toString(),t.argumentList==CDD.Terminology.t("readout_definition")){var n=this.functionNames.filter(function(t){return t.argumentList==CDD.Terminology.t("readout_definition")}).map(function(t){return t.functionName});this.aggregationFunctionNamesPattern="("+n.join("|")+")\\s*\\("}},s.prototype.addAutoFormulaFunctions=function(t){t.forEach(function(t){var e="number"==t.input_type?"number":CDD.Terminology.t("readout_definition"),n=new i(t.name,e,t.description);this.addAutoFormulaFunction(n)}.bind(this))},s.prototype.addAutoFormulaReadoutDefinitions=function(t){t.forEach(function(t){var e=new r(t.name,null,null,t.aggregation_type,t.different_protocol,t.protocol_condition,t.protocol_id,t.short_name,t.numeric_output_readout_row_class);this.addAutoFormulaFunction(e)}.bind(this))},window.AutoFormula=s}).call(e,n(12),n(23))},6882:function(t,e,n){"use strict";document.documentElement.setAttribute("data-browser",navigator.userAgent)},6883:function(t,e,n){"use strict";(function(t){window.showContainerTab=function(e,n){t("#"+e).closest(".container").find(".container-tab").removeClass("container-tab-active"),t("#"+e).addClass("container-tab-active"),t("#"+e).closest(".container").find(".container-tabs a").removeClass("active"),t("#"+e).closest(".container").find(".container-tabs div.tab").removeClass("active"),t("#"+e+"Link").closest("div.tab").addClass("active"),t("#"+e+"Link").addClass("active"),t("#"+e).find(":focusable:first").focus()},window.setupBigDataTable=function(e,n){var i,o,r,a,s,l,u,c,d;function h(e){return"separate"==a.css("border-collapse")&&(s=t(e).css("border-spacing"))?2*s.match(/\d+/)[0]:0}function p(){var e=o[0].clientWidth,i=o[0].clientHeight,s=function(){var e=h(u),i=u[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr");if(0!==i.length){for(var o=t(i[0]).children(),r=n.fixedRowHeaderCount-1;r>=0;r--)e+=o[r].offsetWidth;return e}}();if(r.css({height:a.find("thead")[0].offsetHeight+h(a)+"px",width:e+"px"}),l.length>0&&(l.css({height:i+"px",width:s+"px"}),u.css({width:e+"px"})),d.length>0){var p,f;if(!0===n.emptyCorner){var m=o.find("th")[0];p=m.clientHeight,f=m.clientWidth}else p=c.find("thead")[0].offsetHeight+h(c),f=s;d.css({height:p+"px",width:f+"px"}),void 0!==c&&c.css({width:e+"px"})}}function f(){var t;r.length>0&&(t=window.innerHeight,i.height()>t?o.css({height:t+"px"}):o.css({height:"auto"})),p()}n=t.extend({fixedColumnHeaders:!0,fixedRowHeaders:!1,fixedRowHeaderCount:1,emptyCorner:!1},n||{});var m=t("#"+e);m.length>0&&(i=m.find("table")).length>0&&(o=t("<div></div>"),m.append(o),o.append(i[0].cloneNode(!0)),o.addClass("cells"),!0===n.fixedColumnHeaders&&(r=t("<div></div>"),m.append(r),(a=t(i[0].cloneNode(!0))).attr("id",i.attr("id")+"-cloneForColumnHeaders"),r.append(a),r.addClass("columnHeaders")),!0===n.fixedRowHeaders&&(l=t("<div></div>"),m.append(l),(u=t(i[0].cloneNode(!0))).attr("id",i.attr("id")+"-cloneForRowHeaders"),l.append(u),l.addClass("rowHeaders")),(!0===n.fixedRowHeaders&&!0===n.fixedColumnHeaders||!0===n.emptyCorner)&&(d=t("<div></div>"),m.append(d),!1===n.emptyCorner&&((c=t(i[0].cloneNode(!0))).attr("id",i.attr("id")+"-cloneCornerCell"),d.append(c)),d.addClass("corner")),i.remove(),t(window).on("resize",function(){f()}),o.on("scroll",function(){p(),void 0!==a&&a.length>0&&a.css({left:"-"+o.scrollLeft()+"px"}),void 0!==u&&u.length>0&&u.css({top:"-"+o.scrollTop()+"px"})}),setTimeout(f,1))},window.rebuildBigDataTable=function(e,n){var i=t("#"+e);if(i.length>0){var o=i.find("table");i.append(o),i.find(".cells").remove(),i.find(".columnHeaders").remove(),i.find(".rowHeaders").remove(),i.find(".corner").remove(),setupBigDataTable(e,n)}}}).call(e,n(12))},6884:function(t,e,n){"use strict";(function(t,e){var n;n=function(t,e){return parseInt(t,10)+parseInt(e,10)},t(function(){if(t("#dataSources-public").length>0){var e=t("#dataSources-public").find(".dataSources-scrollBox");if(e.length>0){var i=Math.max(200,e.height()+t("#dataSources").height()-t("#dataSources").find(".drilldown-menu").height());e.css({maxHeight:i+"px"})}}t("#dataSources-createNew-link")&&t("#dataSources-createNew-link").on("click",function(e){e.preventDefault(),t("#dataSources-createNew").toggleClass("open")}),t(".dataSources-sourceList").each(function(e,n){var i=t(n);window.CDD.DataSourceSelection.updateCheckBoxState(i)}),t(".collapsible-header .clickable").on("click",function(e){var n;e.stopPropagation(),n=e.currentTarget,t(n).closest(".dataSources-sourceList").toggleClass("collapsible-open").toggleClass("collapsible-closed")}),setTimeout(function(){var e=null,i=null,o=function(){e&&(e.parents(".dataSources-scrollBox-container").removeClass("dataSources-hoverBox"),e.remove(),e=null)};t(".dataSources-source").each(function(){var r=t(this),a=r.parent(".dataSources-scrollBox"),s=a.parent(".dataSources-scrollBox-container"),l=r.find('input[type="checkbox"]');r.on("mouseover",function(t){if(e){if(i===r)return;o()}a.length>0?function(t,r,a,s){e=t.clone(!0),i=t,r.addClass("dataSources-hoverBox"),a.after(e),e.attr("id",e.attr("id")+"_clone"),e.addClass("dataSources-source-hover");var l={top:n(e.css("border-top-width"),e.css("padding-top")),left:-1*n(e.css("border-left-width"),e.css("padding-left"))},u=function(t,e){e=e||{};var n=t.position();"top"in e&&(n.top+=e.top),"left"in e&&(n.left+=e.left),this.css(n)}.bind(e,t,l);e.css({position:"absolute",margin:0,"z-index":101}),function(t,e){var n=t.find('input[type="checkbox"]');n.prop("checked",e.prop("checked")),e.on("click",function(){n.prop("checked",e.prop("checked"))})}(e,s),u(),a.on("scroll",u),t.on("mouseleave",o)}(r,s,a,l):r.addClass("dataSources-source-hover")}),r.on("mouseleave",function(t){r.removeClass("dataSources-source-hover")})}),t(".dataSources-scrollBox").on("mouseleave",function(e){var n=t(e.currentTarget).parent();n.find(":hover").length>0||o()}),t(".dataSources-sourceList > .collapsible-header > .input-checkbox").on("click",function(e){t(e.currentTarget).closest(".dataSources-sourceList").find(".dataSources-scrollBox .dataSources-source .input-checkbox").filter(function(){return this.checked!=e.currentTarget.checked}).click()})},10)}),"undefined"===typeof window.CDD&&(window.CDD={}),window.CDD.DataSourceSelection=function(){var n=0,i=null;function o(n){var i=t(n),o=i.find(".collapsible-inner .input-checkbox").toArray(),r=(o=e.uniqBy(o,function(t){return t.id})).filter(function(e){return t(e).prop("checked")}),a=t(i.find(".collapsible-header .input-checkbox")),s=t(i.find(".collapsible-header .clickable .sectionCount"));switch(s.text(r.length),r.length){case 0:a.prop("checked",!1).prop("indeterminate",!1),s.removeClass("nonZero");break;case o.length:a.prop("checked",!0).prop("indeterminate",!1),s.addClass("nonZero");break;default:a.prop("checked",!1).prop("indeterminate",!0),s.addClass("nonZero")}}function r(e){0===--n&&(i=window.CDD.DataSourceSelection.updateCallback().then(function(){i=null,t(".dataSources-sourceList").each(function(t,e){o(e)})}))}return{pageUpdateUrl:null,onSelectionChanged:null,selectionChanged:function(e,o){n++,i&&(i.abort?i.abort():i.reject&&i.reject()),null!==window.CDD.DataSourceSelection.onSelectionChanged&&window.CDD.DataSourceSelection.onSelectionChanged(),t.ajax(e,{async:!0,dataType:"script",method:o?"PUT":"DELETE",complete:r})},updateCallback:function(){return t.ajax(window.CDD.DataSourceSelection.pageUpdateUrl,{async:!0,dataType:"script",method:"GET",headers:{"If-Modified-Since":"Thu, 1 Jan 1970 00:00:00 GMT","Cache-Control":"no-cache"}})},updateComplete:r,updateCheckBoxState:o}}()}).call(e,n(12),n(23))},6885:function(t,e,n){"use strict";(function(t){var e;void 0===CDD&&(CDD={}),e=function(e){var n=t("#addToExistingCollection-form_submit"),i=t("#addToExistingCollection-project"),o=t(this).data("collection-path-template"),r=this;if(void 0===n.data("onClickHandler")&&CDD.makeDisableable(n,function(){if(""===r.value)return!1;var e=CDD.SearchResultSelection?CDD.SearchResultSelection.toQueryString():"";return CDD.disable(n),t.ajax(o.replace("COLLECTION_ID",r.value),{async:!0,dataType:"script",method:"PUT",data:e}),!1},!1),this.value){CDD.enable(n);var a=t(this.options[this.options.selectedIndex]).data().project;i.html(a?a.escapeHTML():"<span class='muted'>private collection</span>")}else CDD.disable(n),i.empty()},t(function(){t(document).on("change","#addToExistingCollection-collection",e)}),CDD.moleculeSelectionSaveNotice=function(e){var n=t("<div class='successMessage addToCollection-notice' id='addToCollection-notice'><p>"+e+"</p></div>");return t("#addToCollection-notice").length>0?t("#addToCollection-notice").replaceWith(n):t("#search_results_table-dialogs").before(n),t("#addToCollection-notice").effect("highlight"),!1}}).call(e,n(12))},6886:function(t,e,n){"use strict";(function(t){var e;void 0===window.CDD&&(window.CDD={}),window.CDD.ConnectionPool=(e=function(e){for(var n=new Array(e),i=0,o=0;o<e;o++)n[o]=t({});return{queue:function(o){var r=void 0,a=t.Deferred(),s=a.promise();function l(e){r=t.ajax(o).done(a.resolve).fail(a.reject).then(e,e)}return n[i].queue(l),i=(i+1)%e,s.abort=function(u){if(r)return r.abort(u);for(var c=void 0,d=0,h=0;h<e||d<0;h++)c=n[i].queue(),d=t.inArray(l,c);return d>-1&&c.splice(d,1),a.rejectWith(o.context||o,[s,u,""]),s},s}}}(3),{enqueue:function(t){e.queue(t)}})}).call(e,n(12))},6887:function(t,e,n){"use strict";(function(t){var e,i=n(89),o=(e=i)&&e.__esModule?e:{default:e};window.CDD.DataFile={upload:function(e){e=t(e);var n,i,r=t("#newUpload"),a=t("#newUpload-file"),s=t("#newUploadProgress"),l=t("#uploadStatus"),u=t("#uploadProgressBar"),c=t("#uploadPercentage"),d=t("#newUploadProcessing"),h=t("#processingStatus"),p=e.attr("action"),f={format:"json"},m=e.find(":input"),g=m.filter("input:file");m.not("input:file").each(function(){f[this.name]=this.value});var v=function(n){CDD.resetElementToInitialState(a),t(s).hide(),t(d).hide(),t(r).find(".errorMessage").hide(),t("#"+n).show(),e[0].enableSubmit(),t(r).show()},y=function(e){"uploaded"!==e.state&&Pollers.stop("dataFileUpload"),"ready"===e.state?function(){var e=document.createElement("form");e.style.display="none",r.append(e),e.method="POST",e.action=p+"/"+i+"/slurps";var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","authenticity_token"),n.setAttribute("value",t.rails.csrfToken()),e.appendChild(n),e.submit()}():"too_large"===e.state?(t("#data_file_record_count").html(e.record_count),v("data_file_too_large")):"unparseable"===e.state&&v("data_file_unparseable")},S=new o.default.FineUploaderBasic({request:{endpoint:p,params:f,inputName:"data_file[file]",customHeaders:{"X-CSRF-Token":t.rails.csrfToken()}},autoUpload:!1,maxConnections:1,callbacks:{onUpload:function(n,i){e[0].disableSubmit(),t(r).hide(),l.html("Uploading \u201c"+i.escapeHTML()+"\u201d"),c.html(""),u.val(null),t(s).show()},onProgress:function(t,e,n,i){if(n<i){var o=Math.round(n/i*100);u.val(o),c.html(o+"% of "+Math.round(i/1024)+" kB")}else u.val(100),l.html("Saving \u201c"+e.escapeHTML()+"\u201d")},onComplete:function(e,o,r){r.error?(t("#data_file_issues").html(r.error.escapeHTML()),v("data_file_errors"),r.reload_page&&window.location.reload()):void 0!==r.data_file_id&&(t(s).hide(),h.html("Parsing \u201c"+o.escapeHTML()+"\u201d"),t(d).show(),i=r.data_file_id,n=p+"/"+i,Pollers.start("dataFileUpload",n,2,y))},onError:function(e,n,i,o){t("#data_file_issues").html(i.escapeHTML()),v("data_file_errors")}}});CDD.storeElementInitialState(a[0]),S.addFiles(g.toArray()),S.uploadStoredFiles()}}}).call(e,n(12))},6888:function(t,e,n){"use strict";(function(t){void 0===window.CDD&&(window.CDD={}),window.CDD.HeatMap={wellDetails:{},previewTimeout:null,clickFlagEvent:null,wellDetail:function(e){var n=t(e.target).attr("id").match(/plate_(\d+)_well_(\d+)_(\d+)/);if(null===n)return"";var i=this.wellDetails[n[1]][n[2]][n[3]];return i?CDD.Helpers.renderDetailsPopup(i):""},showWellDetails:function(t){this.cancelPreviewWellDetails(),balloon.hideTooltip(),balloon.toggleTooltip(t,this.wellDetail(t))},previewWellDetails:function(e){balloon.delayTime=1,this.cancelPreviewWellDetails(),t(e.target).on("mouseout",t.proxy(this.cancelPreviewWellDetails,this)),this.previewTimeout=window.setTimeout(this.timeoutFunction(e),500)},timeoutFunction:function(e){return t.proxy(function(){balloon.showTooltip(e,this.wellDetail(e))},this)},cancelPreviewWellDetails:function(){this.previewTimeout&&(window.clearTimeout(this.previewTimeout),this.previewTimeout=null)}}}).call(e,n(12))},6889:function(t,e,n){"use strict";void 0===window.CDD&&(window.CDD={}),window.CDD.Helpers={capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},renderDetailsPopup:function(t){var e=[];t.batchName&&e.push("<li><strong>"+this.capitalize(window.CDD.Terminology.t("batch").escapeHTML())+" name:</strong> "+t.batchName+"</li>"),t.protocolName&&e.push("<li><strong>"+this.capitalize(window.CDD.Terminology.t("protocol").escapeHTML())+":</strong> "+t.protocolName+"</li>"),t.runName&&e.push("<li><strong>"+this.capitalize(window.CDD.Terminology.t("run").escapeHTML())+':</strong> <a href="'+t.runUrl+'" target="_blank">'+t.runName+"</a></li>"),t.plateName&&e.push("<li><strong>"+this.capitalize(window.CDD.Terminology.t("plate").escapeHTML())+":</strong> "+t.plateName+"</li>"),t.well&&e.push("<li><strong>"+this.capitalize(window.CDD.Terminology.t("well").escapeHTML())+":</strong> "+t.well+"</li>"),t.popupData&&t.popupData.forEach(function(t){e.push('<li style="clear: both"><strong>'+t[0]+":</strong> "+t[1]+"</li>")});var n="<h3>";if(t.url){n+='<a href="'+t.url+'" target="_blank">'+t.name+"</a></h3>";var i=t.structureless?'<div class="thumbnail molecule-img__structureless"><p>No Structure</p></div>':'<img class="thumbnail" src="'+t.url+'.svg" width="124" height="124">';n+='<a href="'+t.url+'" target="_blank">'+i+"</a>"}else n+=t.name+"</h3>";return e.length>0&&(n+="<ul>"+e.join("")+"</ul>"),'<div class="details-popup">'+n+"</div>"},rjsPostProcessing:function(){window.renderReactComponents()}}},6890:function(t,e,n){"use strict";(function(t,e){t(document).ready(function(){function n(e){var n=t(e).closest(".inventory-state");n.children(".update").hide(0,function(){t(this).find(".cancel-update, .new-location, .debit-amount").removeClass("slide-in-right")}),n.children(".current").show(0,"",function(){t(this).find(".current-location, .current-amount").addClass("slide-in-left")})}t(document).on("ajax:success",".new_inventory_update",function(e,n,i,o){t(e.target).closest(".inventory-wrapper").replaceWith(o.responseText)}).on("ajax:error",".new_inventory_update",function(n,i){var o=i.responseJSON,r=t(n.target);r.parent().find(".errorMessage").remove();var a=t("<ul>");e.forEach(o,function(n,i){e.forEach(n,function(n){a.append(t("<li>",{text:e.capitalize(i).escapeHTML()+" "+n.escapeHTML()}))})}),r.append(t("<div>",{class:"errorMessage"}).append(a))}),t(document).on("click",".update-inventory",function(){var e;(e=t(this).closest(".inventory-state")).children(".current").hide(0,function(){t(this).find(".current-location, .current-amount").removeClass("slide-in-left")}),e.children(".update").show(0,"",function(){t(this).find(".cancel-update, .new-location, .debit-amount").addClass("slide-in-right"),t(this).find("#inventory_update_debit").focus()})}).on("click",".cancel-update",function(){n(this)}).on("keyup",function(e){27==e.keyCode&&(n(t("#inventory_update_debit:focus")),n(t("#inventory_update_location:focus")))})})}).call(e,n(12),n(23))},6891:function(t,e,n){"use strict";(function(t){!function(){var e=new function(){var e=164,n=147,i=2.4;function o(e){var n=e.currentTarget,i=n.pendingImageSize;"undefined"===typeof n.aspectRatio&&(n.aspectRatio=n.width/n.height);var o=t(n),r=-1;if(n.pendingImageSizeRepresentsWidth)n.aspectRatio>=1?(o.width(i),r=i/n.aspectRatio):r=n.height,o.height(r);else{var a=i*n.aspectRatio,s=i;a>n.parentWidth&&(s=(a=n.parentWidth)/n.aspectRatio),o.width(a),o.height(s),r=s}var l=(i-r)/2,u=i-r-l;o.css("margin-top",l),o.css("margin-bottom",u)}function r(t,r){return function(a,s){if(a.target===window||t.has(a.target).length){void 0!==s&&(r.width(s.size.width+(s.size.width-s.originalSize.width)/i),r.height(s.size.height+(s.size.height-s.originalSize.height)/i));var l=r.width(),u=r.height(),c=t.find(".thumbnail").not(".raster_image"),d=t.find("textarea"),h=Math.min(u-e,l),p=u-n-h;d.height(p),c.width(h),c.height(h),void 0!==s?(s.size.width=h,s.size.height=u):r.width(h);var f=t.find(".raster_image"),m=h===l;f.each(function(){if(this.pendingImageSize=h,this.pendingImageSizeRepresentsWidth=m,this.parentWidth=l,this.complete){var t={};t.currentTarget=this,o(t)}else this.addEventListener("load",o)})}}}this.onOpen=function(e){var n=e.children(".subcontainer");e.find(".thumbnail").each(function(){var i=this.dataset.src;void 0!==i&&(this.src=i,this.removeAttribute("data-src"),t(this).is(":visible")&&t(this).on("load",r(e,n)),t(this).hasClass("emf_thumbnail")&&t(this).on("error",function(){this.src="data:image/svg+xml;utf8,<svg viewBox='0 0 280 280' xmlns='http://www.w3.org/2000/svg'><text text-anchor='middle' x='140' y='130'>Your browser cannot display EMF images,</text><text text-anchor='middle' x='140' y='150'>but you can download the file.</text></svg>"}))})},this.onLoad=function(e){var n=e.children(".subcontainer");n.resizable({resize:r(e,n)}),t(window).resize(r(e,n))}},n={"molecule-download-copy-popup":e.onOpen},i={"molecule-download-copy-popup":e.onLoad};function o(){t("body").removeClass("light-box-open"),t(".light-box:visible").addClass("hidden")}var r=null;function a(e){this===e.target&&this===r?(e.stopPropagation(),o()):e.keyCode===t.ui.keyCode.ESCAPE&&o()}t(document).ready(function(){var e=function(e){t("."+e).each(function(){i[e](t(this))})};for(var n in i)e(n)}),t(document).on("click",".light-box-link",function(){var e=t(this).nextAll(".light-box:first");for(var i in e.removeClass("hidden"),t("body").addClass("light-box-open"),n)e.hasClass(i)&&n[i](e)}),t(document).on("mousedown",function(t){r=t.target}),t(document).on("click",".light-box",a),t(document).on("click",".light-box-close-link",o),t(document).on("keyup",a)}()}).call(e,n(12))},6892:function(t,e,n){"use strict";(function(t,e){function i(t,e,n){this.data=null,this.dataUrl=null,this.contextUrl=null,BasePlotter.call(this,t,e,n),this.dataUrl=e,this.contextUrl=n}n(248),i.prototype=Object.create(window.BasePlotter.prototype),i.prototype.constructor=i,i.prototype.setup=function(){BasePlotter.prototype.setup.call(this),this.plot.onShowHint=this.onMoleculeSelection.bind(this),this.plot.onBeforeUnselectPoint=this.onMoleculeUnselection.bind(this),this._loadData()},i.prototype.chartOptions=function(){var t=BasePlotter.prototype.chartOptions.call(this);return t.usePixelApi=!0,t},i.prototype.selectXAxis=function(e){this.resetZoom(!1),this.data.buildXExtractor(e),t("#plotter-options-xAxisTitle").val(this.data.getXAxisTitle()),this.plot.axis_bottom.setCaption(this.data.getXAxisTitle().escapeHTML()),this._updatePlot()},i.prototype.selectYAxis=function(e){this.resetZoom(!1),this.data.buildYExtractor(e),t("#plotter-options-yAxisTitle").val(this.data.getYAxisTitle()),this.plot.axis_left.setCaption(this.data.getYAxisTitle().escapeHTML()),this._updatePlot()},i.prototype.selectSeries=function(t){this.resetZoom(!1),"Samples only"==t?this.data.showDataSeriesByJsonIdentifiers([this.data.SAMPLE_JSON_IDENTIFIER]):"Controls only"==t?this.data.showDataSeriesByJsonIdentifiers(this.data.CONTROL_JSON_IDENTIFIERS):this.data.showDataSeriesByJsonIdentifiers(this.data.SAMPLE_AND_CONTROL_JSON_IDENTIFIERS),this._updateStatistics()},i.prototype.setPointSize=function(t){null!=this.data&&(this.data.setPointSize(parseFloat(t)),this._draw())},i.prototype.toggleMeanDisplay=function(){this.data.toggleMeanDisplay(),this._updatePlot()},i.prototype.toggleStandardDeviationDisplay=function(){this.data.toggleStandardDeviationDisplay(),this._updatePlot()},i.prototype.setStandardDeviationMultiplier=function(t){this.data.setStandardDeviationMultiplier(parseFloat(t)||1),this._updatePlot()},i.prototype.userChangedOptions=function(){this.plot.setTitle(t("#plotter-options-title").val().escapeHTML()),this.plot.axis_bottom.setCaption(t("#plotter-options-xAxisTitle").val().escapeHTML()),this.plot.axis_left.setCaption(t("#plotter-options-yAxisTitle").val().escapeHTML()),this.plot.setShowLegend(t("#plotter-options-legend").prop("checked")),t("#plotter-options-grid").prop("checked")?this.plot.axis_bottom.showGrid(!1):this.plot.axis_bottom.hideGrid(!1),t("#plotter-options-grid").prop("checked")?this.plot.axis_left.showGrid(!1):this.plot.axis_left.hideGrid(!1),this.plot.redrawAxes()},i.prototype.setPlotHintText=function(t){this.plot.__el_hint_text.innerHTML=t},i.prototype.fetchPopupContents=function(e,n){var i=this;t.ajax(n,{method:"GET",success:function(t){e===i.plot.selected_point&&i.setPlotHintText(t)}})},i.prototype.onMoleculeSelection=function(t,e,n,i,o){if(null!==e.indexes&&null!==t){var r=this,a=this.buildPopupUrl(t,e);return"hover"===o?this.moleculeSelectionTimeout=setTimeout(function(){r.fetchPopupContents(t,a)},500):"select"===o&&(this.clearAjaxTimeout(),this.fetchPopupContents(t,a)),"<div style='width:320px; height:154px; '>Loading...</div>"}},i.prototype.buildPopupUrl=function(t,e){var n=this.data.data[e.indexes[t.userdata][0]],o=e.indexes[t.userdata][1],r=this.data.yExtractor,a=n[r.headerGroupIndex][o][r.headerIndex];return new i.PopupUrlBuilder(this,t,n,a).getUrl()},i.prototype.onMoleculeUnselection=function(){this.clearAjaxTimeout()},i.prototype.clearAjaxTimeout=function(){this.moleculeSelectionTimeout&&(clearTimeout(this.moleculeSelectionTimeout),this.moleculeSelectionTimeout=null)},i.prototype._loadData=function(){t("#plot").hide(),t("#plot-loading").show(),new i.StreamlinedAjaxDataLoader(this,this.dataUrl)},i.prototype.showPlot=function(e){this.data=new i.Data(this,e),e.warning&&this._addWarning(e.warning),this.defaultIndexType=e.defaultIndexType,t("#plotter-options-axes-scatter-x option").length=0;var n=0;t("#plotter-options-axes-scatter-x")[0].options[n++]=new Option(this.data.buildDefaultXExtractor(this.defaultIndexType).getAxisTitle(),"",!1,!1),this.data.headers.forEach(function(e){e.getHeadersForXAxis().forEach(function(i){t("#plotter-options-axes-scatter-x")[0].options[n++]=new Option(i.getAxisTitle(),[e.index,i.index],!1,!1)})}),t("#plotter-options-axes-scatter-y option").length=0;var o=0;this.data.headers.forEach(function(e){e.getHeadersForYAxis().forEach(function(n){t("#plotter-options-axes-scatter-y")[0].options[o++]=new Option(n.getAxisTitle(),[e.index,n.index],!1,!1)})}),n>0&&o>0&&(this.selectXAxis(t("#plotter-options-axes-scatter-x option:first").val()),this.selectYAxis(t("#plotter-options-axes-scatter-y option:first").val())),t("#plot-loading").hide(),t("#plot").show(),t("#plotter-options")[0].disabled=!1},i.prototype._addWarning=function(e){t("#plotter-warningMessageSection").show(),t("#plotter-warningMessage").text(e)},i.prototype._updatePlot=function(){this.data.canGenerateSeries()&&(this._updateStatistics(),this._draw())},i.prototype._updateStatistics=function(){t("#stats-title").html(this.data.getYAxisTitle().escapeHTML()+" statistics"),t("#stats-mean").html(this.data.getCurrentSeriesMean()),t("#stats-median").html(this.data.getCurrentSeriesMedian()),t("#stats-sampleStandardDeviation").html(this.data.getCurrentSeriesSampleStandardDeviation()),t("#stats-minimum").html(this.data.getCurrentSeriesMinimum()),t("#stats-median").html(this.data.getCurrentSeriesMedian()),t("#stats-maximum").html(this.data.getCurrentSeriesMaximum())},i.StreamlinedAjaxDataLoader=function(e,n){t.ajax(n,{async:!0,method:"GET",dataType:"json",success:e.showPlot.bind(e)})},i.Data=function(t,e){this.SAMPLE_TITLE='<span class="ejsc-legend-series-caption-bullet">&bull;</span> Sample',this.POSITIVE_CONTROL_TITLE='<span class="ejsc-legend-series-caption-bullet">&bull;</span> Positive control (hit)',this.NEGATIVE_CONTROL_TITLE='<span class="ejsc-legend-series-caption-bullet">&bull;</span> Negative control',this.REFERENCE_MOLECULE_CONTROL_TITLE='<span class="ejsc-legend-series-caption-bullet">&bull;</span> Reference '+CDD.Terminology.t("molecule"),this.UNSPECIFIED_CONTROL_TITLE='<span class="ejsc-legend-series-caption-bullet">&bull;</span> Control',this.SAMPLE_JSON_IDENTIFIER="",this.POSITIVE_CONTROL_JSON_IDENTIFIER="+",this.NEGATIVE_CONTROL_JSON_IDENTIFIER="-",this.REFERENCE_MOLECULE_JSON_IDENTIFIER="#",this.UNSPECIFIED_CONTROL_JSON_IDENTIFIER="?",this.plotter=t,this.data=e.data,this.plateSizes=e.plateSizes,this.headers=e.headers.map(function(t,e){return new i.HeaderGroup(t,e)}),this.displayMean=!1,this.displayStandardDeviation=!1,this.standardDeviationMultiplier=1,this.dataSeries=[],this.pointSize=1.2,this.seriesDetails={},this.seriesDetails[this.SAMPLE_JSON_IDENTIFIER]={title:this.SAMPLE_TITLE,color:"#000",visible:!0},this.seriesDetails[this.POSITIVE_CONTROL_JSON_IDENTIFIER]={title:this.POSITIVE_CONTROL_TITLE,color:"#f00",visible:!0},this.seriesDetails[this.NEGATIVE_CONTROL_JSON_IDENTIFIER]={title:this.NEGATIVE_CONTROL_TITLE,color:"#00f",visible:!0},this.seriesDetails[this.REFERENCE_MOLECULE_JSON_IDENTIFIER]={title:this.REFERENCE_MOLECULE_CONTROL_TITLE,color:"#fa1",visible:!0},this.seriesDetails[this.UNSPECIFIED_CONTROL_JSON_IDENTIFIER]={title:this.UNSPECIFIED_CONTROL_TITLE,color:"#0f0",visible:!0},this.SAMPLE_AND_CONTROL_JSON_IDENTIFIERS=Object.keys(this.seriesDetails),this.CONTROL_JSON_IDENTIFIERS=this.SAMPLE_AND_CONTROL_JSON_IDENTIFIERS.filter(function(t){return""!==t})},i.Data.prototype.toggleMeanDisplay=function(){this.displayMean=!this.displayMean,this.displayMean?this._addMeanSeries():this.meanSeries&&this.plotter.plot.removeSeries(this.meanSeries,!1)},i.Data.prototype.toggleStandardDeviationDisplay=function(){this.displayStandardDeviation=!this.displayStandardDeviation,this.displayStandardDeviation?this._addStandardDeviationSerieses():this._removeStandardDeviationSerieses()},i.Data.prototype.setStandardDeviationMultiplier=function(t){this.standardDeviationMultiplier=t,this.displayStandardDeviation&&(this._removeStandardDeviationSerieses(),this._addStandardDeviationSerieses())},i.Data.prototype.buildXExtractor=function(t){this._blank(t)?this.xExtractor=this.buildDefaultXExtractor(this.plotter.defaultIndexType):this.xExtractor=new i.DataExtractor(t,this.headers),this.plotter.plot.axis_bottom.onNeedsTicks=this.xExtractor.tickFormatter(),this._updateData()},i.Data.prototype.buildDefaultXExtractor=function(t){return"well"==t?new i.WellIndexExtractor(this):new i.MoleculeIndexExtractor},i.Data.prototype.buildYExtractor=function(t){this.yExtractor=new i.DataExtractor(t,this.headers),this._updateData()},i.Data.prototype.getXAxisTitle=function(){return this.xExtractor.getAxisTitle()},i.Data.prototype.getYAxisTitle=function(){return this.yExtractor.getAxisTitle()},i.Data.prototype.canGenerateSeries=function(){return this.xExtractor&&this.yExtractor},i.Data.prototype.getCurrentSeriesMean=function(){return this.cachedStatistics.getFormattedMean()},i.Data.prototype.getCurrentSeriesSampleStandardDeviation=function(){return this.cachedStatistics.getFormattedSampleStandardDeviation()},i.Data.prototype.getCurrentSeriesMinimum=function(){return this.cachedStatistics.getFormattedMinimum()},i.Data.prototype.getCurrentSeriesMedian=function(){return this.cachedStatistics.getFormattedMedian()},i.Data.prototype.getCurrentSeriesMaximum=function(){return this.cachedStatistics.getFormattedMaximum()},i.Data.prototype.showDataSeriesByJsonIdentifiers=function(t){for(var e in this.seriesDetails){var n=this.dataSeries.filter(function(t){return t.title===this.seriesDetails[e].title},this);if(n.length>0){var i=-1!==t.indexOf(e);this.seriesDetails[e].visible=i,i?n[0].show():n[0].hide()}this._resetStatistics()}},i.Data.prototype.setPointSize=function(t){this.pointSize=t,this.dataSeries.forEach(function(t){t.pointSize=this.pointSize},this)},i.Data.prototype._updateData=function(){var e;if(this.canGenerateSeries()){this.dataSeries.length=0,this.plotter.plot.clearSeries(!1);var n={};for(e in this.seriesDetails)n[e]={data:[],indexes:[],count:0,options:this.seriesDetails[e]};for(var i=0;i<this.data.length;++i)for(var o=this.data[i],r=this.xExtractor.getValue(o,i),a=this.yExtractor.getValues(o),s=0,l=a.length;s<l;++s){var u=a[s],c=u.value;if(!this._blank(r)&&!this._blank(c)){var d=n[u.controlType];d.data.push([r,c,null,d.count++]),d.indexes.push([i,u.rowIndex])}}for(e in n){var h=n[e];if(h.data.length>0){h.data.sort(function(t,e){return t[0]-e[0]});var p=new EJSC.ScatterSeries(new EJSC.ArrayDataHandler(h.data),t.extend({pointStyle:"circle",opacity:100,pointSize:this.pointSize,autosort:!1},h.options));p.indexes=h.indexes,this.dataSeries.push(this.plotter.plot.addSeries(p,!1))}}this._resetStatistics(),this._addMeanSeries(),this._addStandardDeviationSerieses()}},i.Data.prototype._resetStatistics=function(){this.cachedStatistics=new i.Statistics,this.dataSeries.forEach(function(t){if(t.visible)for(var e=t.getDataHandler().getArray(),n=0,i=e.length;n<i;++n)this.cachedStatistics.addValue(parseFloat(e[n][1]))},this)},i.Data.prototype._blank=function(t){return null===t||""===t},i.Data.prototype._addMeanSeries=function(){this.displayMean&&this.cachedStatistics._getMean()&&(this.meanSeries=this._addHorizontalLine(this.cachedStatistics._getMean(),{id:"mean",color:"#540054"}))},i.Data.prototype._addStandardDeviationSerieses=function(){if(this.displayStandardDeviation&&this.cachedStatistics._getSampleStandardDeviation()){var t=this.standardDeviationMultiplier*this.cachedStatistics._getSampleStandardDeviation();this.meanPlusSsdSeries=this._addHorizontalLine(this.cachedStatistics._getMean()+t,{color:"#a97fa9"}),this.meanMinusSsdSeries=this._addHorizontalLine(this.cachedStatistics._getMean()-t,{color:"#a97fa9"})}},i.Data.prototype._removeStandardDeviationSerieses=function(){this.meanMinusSsdSeries&&this.plotter.plot.removeSeries(this.meanMinusSsdSeries,!1),this.meanPlusSsdSeries&&this.plotter.plot.removeSeries(this.meanPlusSsdSeries,!1)},i.Data.prototype._addHorizontalLine=function(e,n){var i=new EJSC.FunctionSeries(function(){return e},t.extend({lineWidth:1,drawPoints:!1,legendIsVisible:!1,hint_string:""},n));return this.plotter.plot.addSeries(i,!1),i},i.DataExtractor=function(t,e){var n=t.split(",");this.headerGroupIndex=n[0],this.headerIndex=n[1],this.headerGroup=e[this.headerGroupIndex],this.header=this.headerGroup.headers[this.headerIndex]},i.DataExtractor.prototype.isDefaultIndex=function(){return!1},i.DataExtractor.prototype.getAxisTitle=function(){return this.header.getAxisTitle()},i.DataExtractor.prototype.getValues=function(t){var e=[],n=t[this.headerGroupIndex];if(n)for(var i=0,o=n.length;i<o;++i){var r=n[i];r[this.headerIndex]&&e.push({value:r[this.headerIndex].v,controlType:r.c||"",batch:r.b,rowIndex:i})}return e},i.DataExtractor.prototype.getValue=function(t){return t[this.headerGroupIndex]&&t[this.headerGroupIndex][0]&&t[this.headerGroupIndex][0][this.headerIndex]?t[this.headerGroupIndex][0][this.headerIndex].v:null},i.DataExtractor.prototype.tickFormatter=function(){return null},i.MoleculeIndexExtractor=function(){},i.MoleculeIndexExtractor.prototype.isDefaultIndex=function(){return!0},i.MoleculeIndexExtractor.prototype.isWellIndex=function(){return!1},i.MoleculeIndexExtractor.prototype.getAxisTitle=function(){return e.capitalize(CDD.Terminology.t("molecule"))+" Index"},i.MoleculeIndexExtractor.prototype.getValue=function(t,e){return e+1},i.MoleculeIndexExtractor.prototype.tickFormatter=function(){return null},i.WellIndexExtractor=function(t){this.rowNames=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF"],this.plateRowLengths={96:12,384:24,1536:48};var e,n,i=this;this.plateSizes=t.plateSizes,this.lastWellIndex=function(){for(var e=0;e<t.data.length;e++)if("undefined"===typeof t.data[e][0][0].w||null===t.data[e][0][0].w)return e;return t.data.length}(),this.plateOffsets=(e=0,n={},Object.keys(t.plateSizes).sort().forEach(function(t){n[t]=e,e+=i.plateSizes[t]}),i.lastWellIndex<t.data.length&&(n["no plate"]=e),n)},i.WellIndexExtractor.prototype.isDefaultIndex=function(){return!0},i.WellIndexExtractor.prototype.isWellIndex=function(){return!0},i.WellIndexExtractor.prototype.getAxisTitle=function(){return"Well Index"},i.WellIndexExtractor.prototype.tickFormatter=function(){var t=this;return function(){return Object.keys(t.plateOffsets).sort().map(function(e){return[t.plateOffsets[e],e]})}},i.WellIndexExtractor.prototype.getValue=function(t,e){var n=t[0][0].w;if(n){var i=t[0][0].p,o=n.match(/\D+/)[0],r=parseInt(n.match(/\d+/)[0],10),a=this.rowNames.indexOf(o)*this.plateRowLengths[this.plateSizes[i]]+r;return this.plateOffsets[i]+a}return this.plateOffsets["no plate"]+(e-this.lastWellIndex+1)},i.Header=function(e,n,i){t.extend(this,e),this.headerGroup=n,this.index=i,this.name=this.n},i.Header.prototype.canBePlotted=function(){return 1==this.t&&this.c>0},i.Header.prototype.getAxisTitle=function(){return this.headerGroup.isChemicalProperties()?this.name:this.headerGroup.name+": "+this.name},i.HeaderGroup=function(e,n){t.extend(this,e),this.index=n,this.name=this.n,this.headers=this.h.map(function(t,e){return new i.Header(t,this,e)},this),this.plottableHeaders=this.headers.filter(function(t){return t.canBePlotted()})},i.HeaderGroup.prototype.getHeadersForXAxis=function(){return this.isChemicalProperties()?this.plottableHeaders:[]},i.HeaderGroup.prototype.getHeadersForYAxis=function(){return this.plottableHeaders},i.HeaderGroup.prototype.isChemicalProperties=function(){return"Chemical Properties"==this.name},i.Statistics=function(){this.sum=0,this.sumOfSquares=0,this.maximum=null,this.minimum=null,this.medianValues=[],this.medianValuesSorted=!0,this.maxNumberOfDecimalPlaces=0},i.Statistics.prototype.addValue=function(t){this.sum+=t,this.sumOfSquares+=Math.pow(t,2),this.maximum=this.maximum?Math.max(t,this.maximum):t,this.minimum=this.minimum?Math.min(t,this.minimum):t,this.medianValues.push(t),this.medianValuesSorted=!1,this.maxNumberOfDecimalPlaces=Math.max(this.maxNumberOfDecimalPlaces,this._calculateDecimalPlaces(t))},i.Statistics.prototype.getFormattedMean=function(){return this._format(this._getMean(),this.maxNumberOfDecimalPlaces)},i.Statistics.prototype.getFormattedSampleStandardDeviation=function(){return this._format(this._getSampleStandardDeviation(),this.maxNumberOfDecimalPlaces)},i.Statistics.prototype.getFormattedMinimum=function(){return this.minimum?this.minimum.toString():"N/A"},i.Statistics.prototype.getFormattedMedian=function(){if(this.medianValuesSorted||(this.medianValues.sort(function(t,e){return t-e}),this.medianValuesSorted=!0),0===this.medianValues.length)return"N/A";if(this.medianValues.length%2==1)return this.medianValues[(this.medianValues.length-1)/2].toString();var t=parseInt(this.medianValues.length/2,10),e=Math.max(this._calculateDecimalPlaces(this.medianValues[t-1]),this._calculateDecimalPlaces(this.medianValues[t-1]));return this._format(.5*(this.medianValues[t-1]+this.medianValues[t]),e)},i.Statistics.prototype.getFormattedMaximum=function(){return this.maximum?this.maximum.toString():"N/A"},i.Statistics.prototype._getCount=function(){return this.medianValues.length},i.Statistics.prototype._getMean=function(){return 0===this._getCount()?null:this.sum/this._getCount()},i.Statistics.prototype._getSampleStandardDeviation=function(){return this._getCount()<2?null:Math.sqrt((this.sumOfSquares-this._getCount()*Math.pow(this._getMean(),2))/(this._getCount()-1))},i.Statistics.prototype._format=function(t,e){return t?t.toFixed(e):"N/A"},i.Statistics.prototype._calculateDecimalPlaces=function(t){var e=t.toString(),n=e.indexOf(".");return-1==n?0:e.length-n-1},i.PopupUrlBuilder=function(e,n,i,o){this.point=n,this.contextUrl=e.contextUrl,this.xExtractor=e.data.xExtractor,this.yExtractor=e.data.yExtractor,this.yObjectId=o.i,this.moleculeId=i.i,this.queryString=t.param(this.buildQueryStringObject())},i.PopupUrlBuilder.prototype.getUrl=function(){return this.appendQueryString(this.buildUrlBase())},i.PopupUrlBuilder.prototype.buildQueryStringObject=function(){var t={"properties[]":[],"values[]":[]};return this.xExtractor.isDefaultIndex()||(t["properties[]"].push(this.xExtractor.header.name),t["values[]"].push(this.point.x)),void 0===this.yObjectId&&(t["properties[]"].push(this.yExtractor.header.name),t["values[]"].push(this.point.y)),t},i.PopupUrlBuilder.prototype.buildUrlBase=function(){return void 0!==this.yObjectId?this.contextUrl+"/readouts/"+this.yObjectId+".popup":this.contextUrl+"/molecules/"+this.moleculeId+".popup"},i.PopupUrlBuilder.prototype.appendQueryString=function(t){return e.trim(this.queryString)?t+"?"+this.queryString:t},window.Plotter=i,t(function(){t("#plotter-options").prop("disabled",!0)})}).call(e,n(12),n(23))},6893:function(t,e,n){"use strict";(function(t,e){var i,o,r,a,s;n(248),CDD.doseResponsePlotFormChangeTracker={formChanged:r=function(){return i!==o.serialize()},setup:function(e){o=t("#"+e),i=o.serialize(),window.onbeforeunload=function(t){if(r())return"Changes have not been saved"}}},CDD.reloadSearchResultRow=(a=null,s=function(t){null!==a&&(window.opener.window.CDD.reloadSearchResultRow(a),a=null)},t(window).on("beforeunload",s),t(window).on("blur",s),function(t){a=t}),window.DoseResponsePlotter=function(t){BasePlotter.call(this,t)},DoseResponsePlotter.prototype=Object.create(BasePlotter.prototype),DoseResponsePlotter.prototype.constructor=DoseResponsePlotter,DoseResponsePlotter.prototype.setup=function(e,n){this.editingOutliers=n,BasePlotter.prototype.setup.call(this),t.extend(this,e),n&&(this.plot.onAfterSelectPoint=this._onPointSelection.bind(this)),this._setupPlotData(),this._draw()},DoseResponsePlotter.prototype.chartOptions=function(){var t=BasePlotter.prototype.chartOptions.call(this);t.show_hints=!1,this.editingOutliers||(t.axis_left.cursor_position=t.axis_bottom.cursor_position={show:!0,color:"#1262B3"});var e=new function(){EJSC.Formatter.__extendTo(this),this.numberOfDigits=function(t){return Math.round(Math.abs(Math.log(Math.abs(t))/Math.log(10)))+1},this.format=function(t){if(0===t)return"0";if(t==1/0)return null;var e=Math.abs(t);if(e>=1e3||e<.01&&0!==e){var n=3*Math.floor((Math.log(e)/Math.log(10)/3).toPrecision(5)),i=t/Math.pow(10,n),o=this.numberOfDigits(i);return e.toString().length>4&&-1===Math.round(e).toString().split("").slice(0,3).indexOf("0")&&(o=3),i.toPrecision(o)+"E"+n}return t.toString().length>4?t.toPrecision(3):t}};return t.axis_left.formatter=e,t.axis_bottom.formatter=new function(){EJSC.Formatter.__extendTo(this),this.format=function(t){return e.format(Math.pow(10,t))}},t.axis_bottom.major_ticks={min_interval:1},t},DoseResponsePlotter.prototype._onPointSelection=function(t,e,n,i,o){"select"==o&&(e.doseResponseDataSeries.toggleOutlierState(t),this._draw())},DoseResponsePlotter.prototype._setupPlotData=function(){this._buildSeries(),this._buildAxes(),this._addSeriesToPlot()},DoseResponsePlotter.prototype._buildSeries=function(){this.series=t.makeArray(this.series).map(function(t){return new DoseResponsePlotter.DataSeries(t,this)},this)},DoseResponsePlotter.prototype._buildAxes=function(){this.doseAxis=t.extend(this.plot.axis_bottom,DoseResponsePlotter.AxisExtension),this.doseAxis.setCaption(this.dose_label),this._setDoseAxisBoundaries(),this.responseAxis=t.extend(this.plot.axis_left,DoseResponsePlotter.AxisExtension),this.responseAxis.setCaption(this.response_label),this._setResponseAxisBoundaries()},DoseResponsePlotter.prototype._addSeriesToPlot=function(){this.series.forEach(function(t){t.addControlSeries(this.plot)},this),this.series.forEach(function(t){t.addSampleCurveSeries(this.plot)},this),this.series.forEach(function(t){t.addPointSeries(this.plot)},this)},DoseResponsePlotter.prototype._setDoseAxisBoundaries=function(){this.dose_axis_min=1/0,this.dose_axis_max=-1/0,this.series.forEach(function(t){var e=t.doseBoundaries();this.dose_axis_min=Math.min(this.dose_axis_min,e.min),this.dose_axis_max=Math.max(this.dose_axis_max,e.max)},this);var t=3-(this.dose_axis_max-this.dose_axis_min);t>0&&(this.dose_axis_min-=t/2,this.dose_axis_max+=t/2),this.doseAxis.setExtremes(this.dose_axis_min,this.dose_axis_max,!1)},DoseResponsePlotter.prototype._setResponseAxisBoundaries=function(){if(this.response_axis_min=1/0,this.response_axis_max=-1/0,this.series.forEach(function(t){var e=t.responseBoundaries(this.dose_axis_min,this.dose_axis_max);this.response_axis_min=Math.min(this.response_axis_min,e.min),this.response_axis_max=Math.max(this.response_axis_max,e.max)},this),this.response_axis_min==this.response_axis_max){var t=Math.abs(this.response_axis_min/2);this.response_axis_min=this.response_axis_min-t,this.response_axis_max=this.response_axis_max+t}this.responseAxis.setExtremes(this.response_axis_min,this.response_axis_max,!1)},DoseResponsePlotter.DataSeries=function(e,n){this.POSITIVE_CONTROL_COLOR="rgb(255, 180, 180)",this.REFERENCE_MOLECULE_COLOR="rgb(255, 204, 51)",t.extend(this,e),this.plotter=n},DoseResponsePlotter.DataSeries.prototype.doseBoundaries=function(){var e=1/0,n=-1/0,i=function(t){e=Math.min(e,t),n=Math.max(n,t)};return t.makeArray(this.p).map(function(t){return t.x}).forEach(i),t.makeArray(this.o).map(function(t){return t.x}).forEach(i),{min:e,max:n}},DoseResponsePlotter.DataSeries.prototype.responseBoundaries=function(e,n){var i=1/0,o=-1/0,r=function(t){i=Math.min(i,t),o=Math.max(o,t)};return t.makeArray(this.p).map(function(t){return t.y}).forEach(r),t.makeArray(this.o).map(function(t){return t.y}).forEach(r),null!=this.pos_cont_resp&&r(this.pos_cont_resp),null!=this.neg_cont_resp&&r(this.neg_cont_resp),null!=this.positiveControlFit()&&(r(this.positiveControlFit().value(e)),r(this.positiveControlFit().value(n))),null!=this.referenceMoleculeFit()&&(r(this.referenceMoleculeFit().value(e)),r(this.referenceMoleculeFit().value(n))),{min:i,max:o}},DoseResponsePlotter.DataSeries.prototype.addControlSeries=function(t){null!=this.positiveControlFitSeries()&&t.addSeries(this.positiveControlFitSeries(),!1),null!=this.referenceMoleculeFitSeries()&&t.addSeries(this.referenceMoleculeFitSeries(),!1)},DoseResponsePlotter.DataSeries.prototype.addSampleCurveSeries=function(t){null!=this.sampleFitSeries()&&(null!=this.interceptSeries()&&this.interceptSeries().map(function(e){t.addSeries(e,!1)}),t.addSeries(this.sampleFitSeries(),!1))},DoseResponsePlotter.DataSeries.prototype.addPointSeries=function(t){t.addSeries(this.outlierSeries(),!1),t.addSeries(this.pointSeries(),!1)},DoseResponsePlotter.DataSeries.prototype.outlierSeries=function(){return void 0===this._outlierSeries&&(this._outlierSeries=this._createScatterSeries(this.o,{pointStyle:"cross",opacity:50})),this._outlierSeries},DoseResponsePlotter.DataSeries.prototype.pointSeries=function(){return void 0===this._pointSeries&&(this._pointSeries=this._createScatterSeries(this.p,{pointStyle:"box",opacity:100})),this._pointSeries},DoseResponsePlotter.DataSeries.prototype.sampleFitSeries=function(){return void 0===this._sampleFitSeries&&null!=this.sampleFit()&&(this._sampleFitSeries=this._createFitSeries(this.sampleFit(),{lineWidth:2,color:this.color})),this._sampleFitSeries},DoseResponsePlotter.DataSeries.prototype.interceptSeries=function(){var t=this;return void 0===this._interceptSeries&&null!=this.sampleFit()&&null!=this.x&&(this._interceptSeries=e.chain(this.x).map(function(e){return t._createInterceptSeries(e)},this).compact().value()),this._interceptSeries},DoseResponsePlotter.DataSeries.prototype.positiveControlFitSeries=function(){return void 0===this._positiveControlFitSeries&&null!=this.positiveControlFit()&&(this._positiveControlFitSeries=this._createFitSeries(this.positiveControlFit(),{lineWidth:1,color:this.POSITIVE_CONTROL_COLOR})),this._positiveControlFitSeries},DoseResponsePlotter.DataSeries.prototype.referenceMoleculeFitSeries=function(){return void 0===this._referenceMoleculeFitSeries&&null!=this.referenceMoleculeFit()&&(this._referenceMoleculeFitSeries=this._createFitSeries(this.referenceMoleculeFit(),{lineWidth:1,color:this.REFERENCE_MOLECULE_COLOR})),this._referenceMoleculeFitSeries},DoseResponsePlotter.DataSeries.prototype.sampleFit=function(){return void 0===this._sampleFit&&null!=this.center&&(this._sampleFit=new DoseResponsePlotter.HillEquation({min:this.min,max:this.max,center:this.center,slope:this.slope})),this._sampleFit},DoseResponsePlotter.DataSeries.prototype.positiveControlFit=function(){return void 0===this._positiveControlFit&&null!=this.cont_center&&(this._positiveControlFit=new DoseResponsePlotter.HillEquation({min:this.cont_min,max:this.cont_max,center:this.cont_center,slope:this.cont_slope})),this._positiveControlFit},DoseResponsePlotter.DataSeries.prototype.referenceMoleculeFit=function(){return void 0===this._referenceMoleculeFit&&null!=this.ref_center&&(this._referenceMoleculeFit=new DoseResponsePlotter.HillEquation({min:this.ref_min,max:this.ref_max,center:this.ref_center,slope:this.ref_slope})),this._referenceMoleculeFit},DoseResponsePlotter.DataSeries.prototype.toggleOutlierState=function(e){var n=e.__owner===this.pointSeries()?this.outlierSeries():this.pointSeries(),i=t("#readout_"+e.userdata+"_outlier_type");n.acquirePoint(e),i.length>0&&(i[0].value=n===this.outlierSeries()?"1":"0")},DoseResponsePlotter.DataSeries.prototype._createFitSeries=function(e,n){return new EJSC.FunctionSeries(e.seriesFunction(),t.extend({lineWidth:1,drawPoints:!1,legendIsVisible:!1,hint_string:"",selectable:!1},n))},DoseResponsePlotter.DataSeries.prototype._createScatterSeries=function(e,n){var i=t.makeArray(e).map(function(t){return[t.x,t.y,null,t.readout_id,t.standard_error_of_the_mean]}),o=new EJSC.ScatterSeries(new EJSC.ArrayDataHandler(i),t.extend({pointSize:4,delayLoad:!1,color:this.color,padding:{x_axis_min:20,x_axis_max:20,y_axis_min:20,y_axis_max:20}},n));return o.doseResponseDataSeries=this,o},DoseResponsePlotter.DataSeries.prototype._createInterceptSeries=function(t){var e=this.plotter.doseAxis.getExtremes();if(t<=e.min||e.max<=t)return null;var n=[[this.plotter.doseAxis.getOutOfBoundMin(),this.sampleFit().value(t)],[t,this.sampleFit().value(t)],[t,this.plotter.responseAxis.getOutOfBoundMin()]];return new EJSC.LineSeries(new EJSC.ArrayDataHandler(n),{lineWidth:1,drawPoints:!1,legendIsVisible:!1,hint_string:"",delayLoad:!1,color:this.color,lineOpacity:20})},DoseResponsePlotter.HillEquation=function(e){t.extend(this,e)},DoseResponsePlotter.HillEquation.prototype.value=function(t){return this.min+(this.max-this.min)/(1+Math.pow(10,-this.slope*(t-this.center)))},DoseResponsePlotter.HillEquation.prototype.seriesFunction=function(){return this.value.bind(this)},DoseResponsePlotter.AxisExtension={getOutOfBoundMin:function(){return 2*this.getExtremes().min-this.getExtremes().max}}}).call(e,n(12),n(23))},6894:function(t,e,n){"use strict";(function(t){window.CDD.openPopupFromLink=function(e){var n=t(e.target);return window.open(n.attr("href")),!1},t(document).on("click","a[data-popup=true]",CDD.openPopupFromLink)}).call(e,n(12))},6895:function(t,e,n){"use strict";var i=function(t,e){this.callback=t,this.frequency=e,this.currentlyExecuting=!1,this.registerCallback()};i.prototype.registerCallback=function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},i.prototype.execute=function(){this.callback(this)},i.prototype.stop=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},i.prototype.onTimerEvent=function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(t){throw this.currentlyExecuting=!1,t}},window.PeriodicalExecuter=i},6896:function(t,e,n){"use strict";(function(t,e){var n={MinRows:6,MaxRows:50,adjustForBrowser:function(e){return t.browser.msie||t.browser.webkit?1.15*e:1.05*e},numRows:function(t,i){var o=0,r=e.words(t,/(.*)(\n|$)/g);return e.reject(r,function(t){return 0===t.trim().length}).forEach(function(t){var e=Math.ceil(t.length/i);o+=0===e?1:e}),Math.floor(n.adjustForBrowser(o))},numCols:function(t){var e=Math.ceil(t.outerWidth()/8);return e<1?Math.max(t.attr("cols"),1):e},adjustTextAreaRows:function(){t("textarea.resizable").each(function(e,i){var o=(i=t(i)).attr("min_rows")||n.MinRows,r=i.attr("max_rows")||n.MaxRows,a=n.numCols(i);i.attr("rows",Math.min(r,Math.max(o,n.numRows(i.val(),a))))}),setTimeout(n.adjustTextAreaRows,300)}};t(n.adjustTextAreaRows)}).call(e,n(12),n(23))},6897:function(t,e,n){"use strict";(function(t){var e={updateHeaderSortingState:function(t,e,n){t.find("th.sorted").removeClass("sorted ascending descending").addClass("sortable"),e.removeClass("sortable").addClass("sorted "+("DESC"==n?"descending":"ascending"))},setSortParameters:function(e){var n=t(t("#sorting_form").prop("sort_by")),i=t(t("#sorting_form").prop("sort_direction")),o=t(t("#display_options_form").prop("sort_by")),r=t(t("#display_options_form").prop("sort_direction"));"molecule_header"!==o[0].value&&"molecule_header"===e?i.val("DESC"):e===n.val()?i.val("DESC"===i.val()?"ASC":"DESC"):i.val("ASC"),n.val(e),o.val(n.val()),r.val(i.val())}};t(document).on("ajax:before",".sorting-link",function(){e.setSortParameters(t(this).closest("th").attr("id")),t(this).data("params",t("#sorting_form").serialize())}),window.sorting=e}).call(e,n(12))},6898:function(t,e,n){"use strict";(function(t,e){var i,o,r,a,s,l,u,c,d,h,p,f,m,g,v,y,S,b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w=I(n(41)),_=I(n(6899)),x=I(n(6900)),C=I(n(230)),E=I(n(412)),D=I(n(116)),T=n(157);function I(t){return t&&t.__esModule?t:{default:t}}CDD.StructureEditor=(o=_.default,r=x.default,a=new Set(["Chain","Smart R-group","R-Group attachment","Electron flow double arrow","Increase radical","Rectangle","3D rotate","Clean 3D","About Marvin JS"]),s=!1,l=function(){window.getMarvinPromise("marvin4js").done(function(t){setTimeout(u,0),t.addButton({name:"Insert structure","image-url":C.default,toolbar:"N"},c)}).fail(function(t){alert("Error modifying toolbars: "+t)})},u=function(){for(var t=document.getElementById("marvin4js"),e=t.contentDocument||t.contentWindow.document,n=["gwt-ToggleButton","gwt-PushButton"],i=0;i<n.length;i++){var o=n[i];Array.from(e.getElementsByClassName(o)).filter(function(t){return a.has(t.title)}).map(function(t){return t.parentNode}).forEach(function(t){return t.style.display="none"})}},c=function(){s=!0,(0,E.default)().then(function(t){(0,T.getMoleculeMrv)(t.identifier).then(function(e){null==e?(0,D.default)({title:"Error",content:CDD.Terminology.t("molecule").titleize()+" '"+t.value+"' is structureless",noCancelOption:!0}).then(function(){}).catch(function(){}).finally(function(){return s=!1}):e.includes("x2=")?f(e,{replace:!1}):p(e,"mrv:-a",function(t){return f(t,{replace:!1})}),s=!1}).catch(function(){(0,D.default)({title:"Error",content:CDD.Terminology.t("molecule").titleize()+" '"+t.identifier+"' not found",noCancelOption:!0}).then(function(){}).catch(function(){}).finally(function(){return s=!1})})}).catch(function(t){setTimeout(function(){s=!1},0)})},d=function(){t("#useThisStructureButton").off("click"),t("#launchAppletFromJS").off("click"),t("#closeStructureEditorLink").off("click"),t(document).off("keydown.structure_editor"),CDD.StructureEditor.ready=!1,CDD.StructureEditor.sketcherInstance&&CDD.StructureEditor.sketcherInstance.clear(),CDD.ModalOverlay.hide()},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=b({replace:!0},e),window.getMarvinPromise("marvin4js").done(function(n){n.setServices(h()),CDD.StructureEditor.sketcherInstance=n,CDD.StructureEditor.ready=!0,e.replace?n.importStructure("mrv",t):n.pasteStructure("mrv",t),window.frames.marvin4js.contentDocument.getElementById("canvas").focus()}).fail(function(t){alert("Error loading structure editor: "+t)})},m=function(e,n){t("#"+i).val(e),t("#structure_query").attr("src",n)},g=function(e,n,i,o){window.getMarvinPackage("marvin4js").done(function(r){var a=function(){return r.sketcherInstance&&(r.sketcherInstance.isEmpty()?i():r.sketcherInstance.exportStructure("mrv").then(function(t){p(t,n,function(t){var n=CDD.moleculeImageHelper.moleculeImagePath(t,e);o(t,n)})})),!1};t("#useThisStructureButton").on("click",a),t(document).on("keydown.structure_editor",function(t){if(CDD.StructureEditor.ready){if(s)return;switch((0,w.default)(t)){case"enter":a(),d();break;case"esc":d()}}})})},v=function(t,e){return g(t,e,function(){m("",function(t){return"search"===t?r:o}(t)),d()},function(t,e){m(t,e),d()})},y=function(n,i,o){CDD.ModalOverlay.show(),function(e){0===t("#marvin4js").length&&(t("#marvin4js-section").append("<iframe id='marvin4js' src= '/marvinjs' data-toolbars='"+e+"'  style='overflow: hidden; width: 100%; height: 100%; border: none;'></iframe>"),l())}(o),function(t){null===t||""===e.trim(t)?f(null):p(t,"mrv:-a",f)}(n),t("#closeStructureEditorLink").on("click",i)},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.structureFormat,n=void 0===e?"mol":e,i=t.toolbars;return{structureFormat:n,toolbars:void 0===i?"reporting":i}},{openMarvin4JS:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o=S(o);var r=t("#"+(i=e)).val();return y(r,d,o.toolbars),v(n,o.structureFormat),!1},openMarvin4JSWithPromise:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=S(n),new Promise(function(i,o){y(t,function(){o(new Error("cancelled"))},n.toolbars),function(t,e,n,i){g(t,e,i,function(t,e){n({image:e,mrv:t})})}(e,n.structureFormat,i,function(){o(new Error("empty"))})}).finally(d)},convertStructure:p=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t,e){return alert("Error loading structure: "+e.errorMessage)};(function(t){return null!=t&&null!=t.match(/^M\s+END\s*$/m)})(e)||(e=e.trim()),t.ajax(h().molconvertws,{contentType:"application/json; charset=UTF-8",dataType:"json",method:"POST",data:JSON.stringify({structure:e,parameters:n}),success:function(t){i(t.structure)},error:o})},marvin4JSServices:h=function(){var t="/webservices2";return{clean2dws:t+"/rest-v0/util/convert/clean",molconvertws:t+"/rest-v0/util/calculate/molExport",stereoinfows:t+"/rest-v0/util/calculate/cipStereoInfo",detailws:t+"/rest-v0/util/detail"}}})}).call(e,n(12),n(23))},6899:function(t,e,n){t.exports=n.p+"_/assets/images/cdd30/layout/structureeditor/structure-editor-new-99813097737096635a2b98a1761e5150.png"},6900:function(t,e,n){t.exports=n.p+"_/assets/images/cdd30/layout/structureeditor/structure-editor-search-2081c9f11f5e082c26c856ce8dedba37.png"},6901:function(t,e,n){"use strict";function i(){this.canvas=document.createElement("canvas"),this.supportsCanvas=!(!this.canvas.getContext||!this.canvas.getContext("2d")),this.supportsCanvas?this.context=this.canvas.getContext("2d"):this.context=null}i.prototype.width=function(t,e){return this.supportsCanvas?(this.context.font=e.css("font-size")+" "+e.css("font-family"),this.context.measureText(t).width):(1.35*e.outerWidth()).round()},window.textMeasurer=new i},6902:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.clearForm=c,e.updateAllCheckboxes=d,e.addAssociatedModel=p,e.normalizeUrl=function(t){if(null===t||0===t.trim().length)return normalizePath(t);var e=i.first(t.split("?")).split("/");return i.includes(["http:","https:"],i.first(e))?normalizePath("/"+e.slice(3).join("/")):normalizePath(t)},e.validateDataFileSelection=f,n(6903),n(6908);var o,r=n(282),a=(o=r)&&o.__esModule?o:{default:o};void 0===window.CDD&&(window.CDD={});var s,l,u=window.CDD;function c(t){t.find(":text, textarea").val(null),t.find(":checkbox, :radio").prop("checked",!1),t.focusFirst(),t.length>0&&(u.Form.makeFormDisableable(t[0]),t[0].enableSubmit())}function d(e,n){t(e).find(":checkbox").prop("checked",n)}function h(e){t("#globalMessages").length>0&&(t("#"+e).remove(),0===t("#globalMessages .globalMessage").length&&t("#globalMessages").remove())}function p(){var e=t(this).closest(".associated-model"),n=(new Date).getTime(),i=e.find("script:first-child").text().replace(/NEW_RECORD/g,n);return e.before(i),n}function f(t,e){var n=t.val().split(".").pop().toLowerCase();i.some(["csv","sdf","xlsx","gz","gzip","zip"],function(t){return n==t})?e.fadeOut():(e.fadeIn(),t.val(""))}u.activeAjax=0,t(function(){t(document).ajaxStart(function(e,n,i){u.activeAjax=u.activeAjax+1,t("#globalAjax").show()}),t(document).ajaxStop(function(e,n,i){u.activeAjax=u.activeAjax-1,u.activeAjax<1&&(u.activeAjax=0,t("#globalAjax").hide(),t(u.setupCalendarFields))})}),u.Form=(s=function(e){e.disableSubmit=function(){var n=t(e).attr("id");t(e).data("disabled",!0),t(e).find("a."+n+"-button").addClass("disabled")},e.enableSubmit=function(){var n=t(this).attr("id");t(e).data("disabled",!1),t(this).find("a."+n+"-button").removeClass("disabled")},t(e).data("initiallyDisabled")&&!t(e).data("setup")&&(e.disableSubmit(),t(e).data("setup",!0))},l=function(e,n){var o=n.id+"-sharingWarning",r=t("#"+o),a=t(n).attr("data-sharing-except_project_ids").split(",");0===r.length&&(r=t("<span>").addClass("warning").text(t(n).data("sharingWarning")).css("padding","0 0 0 10px").attr("id",o)).insertAfter(n),""===n.value||i.includes(a,n.value)?r.hide():r.show()},t(function(){u.Form.setupNewForms(),t(document).ajaxComplete(u.Form.setupNewForms),t(document).on("change","select[required]",function(){""===t(this).val().trim()?t(this).closest("form")[0].disableSubmit():t(this).closest("form")[0].enableSubmit()}),t(document).on("change","select[data-sharing-warning]",function(t){l(0,t.currentTarget)})}),{setupNewForms:function(){t("form").toArray().forEach(s),t("select[data-sharing-warning]").each(function(t,e){l(0,e)})},makeFormDisableable:s}),u.storeElementInitialState=function(t){t.__initialInnerHTML__=t.innerHTML},u.resetElementToInitialState=function(e){"undefined"!==typeof e&&(void 0!==e.__initialInnerHTML__?(t(e).html(e.__initialInnerHTML__),u.Form.setupNewForms()):u.storeElementInitialState(e))},window.showEditPanel=function(e,n){var i=t("#"+e+"-edit");n&&u.resetElementToInitialState(i[0]),t("#"+e+"-show").hide(),t("#"+e+"-drag").hide(),i.show(),!0===n?i.focusFirst():t("#"+n).focusFirst()},window.hideEditPanel=function(e){t("#"+e+"-edit").hide(),t("#"+e+"-show").show(),t("#"+e+"-drag").show()},window.showDialog=function(e,n){var i=t("#"+e);showDialogOfElement(i)},window.showDialogOfElement=function(t){t.find(".hasDatepicker").datepicker("destroy"),u.resetElementToInitialState(t[0]),u.setupCalendarFields(),t.show(),t.focusFirst()},window.insertGlobalMessage=function(e){0===t("#globalMessages").length&&t("<div></div>").attr("id","globalMessages").prependTo("#content-inner");var n=t("<div></div>").html(e).children().first();t("#"+n.attr("id")+":visible").length>0?t("#"+n.attr("id")).replaceWith(e):t("#globalMessages").prepend(e)},window.removeGlobalMessage=h,u.Export={setElnDisableTo:function(){},submit:function(e){u.Export.disable(),window.scrollTo(0,0),t.ajax(e,{async:!0,dataType:"script",method:"GET"})},disable:function(){t(".export_link").hide(),t(".disabled_export_link").show(),window.CDD.Export.setElnDisableTo(!0),t(".export_form").each(function(t,e){void 0!==e.disableSubmit&&e.disableSubmit()}),t("#exportOptions-dialog").hide()},enable:function(){h("export_progress_message"),t(".export_link").show(),t(".disabled_export_link").hide(),window.CDD.Export.setElnDisableTo(!1),t("#export_options_form").length>0&&t("#export_options_form")[0].enableSubmit()},downloadClicked:function(){return t("#export_progress_message a.download").data("disabled",!0),t("#export_progress_message").fadeOut(),window.CDD.Export.enable(),!0}},t(function(){t(document).on("click",".associated-model .add-associated-model",p),t(document).on("click","#add_collection_term_link",function(){t("#collections .collection_criterion:visible .criterion_junction:first").hide()}),t(document).on("click",".add-members-link",function(){window.CDD.Projects.updateUserSelects(t(this).closest("form"))})}),window.updateTitleAndPageHeader=function(e,n){"undefined"==typeof n&&(n=e),document.title=n.unescapeHTML()+" - Collaborative Drug Discovery",t("#pageHeader").find("h1 .title").text(e.unescapeHTML())},window.openMiniApp=function(t,e,n){"undefined"===typeof n&&(n="resizable,scrollbars,width=800,height=600");var i=window.open(t,e,n);i.__isChildWindow=!0,i.focus()},window.normalizePath=function(t){if(null===t)return null;var e=t.split("/");return i.every(e,function(t){return 0===t.trim().length})?"/":(0===i.last(e).trim().length&&e.pop(),e.map(function(t){return 0===t.trim().length||isNaN(t)?t:"N"}).join("/"))},window.Pollers={active:{},start:function(e,n,i,o){var r=n+(n.indexOf("?")>-1?"&":"?")+"poller_request=true";this.stop(e);this.active[e]=new PeriodicalExecuter(function(){return t.ajax(r,{async:!0,method:"GET",success:o,global:!1})},i)},stop:function(t){this.active[t]&&(this.active[t].stop(),delete this.active[t])}},u.Slurp={updateGenericPage:function(t){Pollers.stop("slurp-progresses")},updateQCReportPage:function(t){i.includes(["processed","committed","canceled","rejected","invalid"],t)&&(Pollers.stop("slurp-progress"),h("qcReportSlurpIndicator"),window.location.reload(!0))},updatePage:function(t){u.Slurp.updateGenericPage(t)}},u.setupAsynchronousContentLoading=function(e,n){var o=function(){var e=t(this).closest("div").find(".asyncLoading");if(e.length>0&&!e.hasClass("requested")){var o=n;i.keys(e.data()).forEach(function(t){o=o.replace(t.toUpperCase(),e.data()[t])}),e.addClass("requested"),t.ajax(o,{async:!0,dataType:"script",method:"GET"})}};t(function(){setTimeout(function(){t(document).on("click",e,o),t(e).filter(".collapsible-open").each(function(t){o.call(t)})},1)})},String.prototype.titleize=function(){return this.split(" ").map(function(t){return i.capitalize(t)}).join(" ")},String.prototype.stripTags=function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},String.prototype.unescapeHTML=function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'")},String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},u.Form.deserialize=function(e,n){var i={input:function(t,e){switch(t.type.toLowerCase()){case"submit":case"hidden":case"password":case"text":return i.textarea(t,e);case"checkbox":return i.inputSelector(t,e);case"radio":return i.radioSelector(t,e)}return!1},inputSelector:function(e,n){for(var i=e.name,o=t(e.form).find("input:checkbox[name='"+i+"']"),r=0,a=o.length;r<a;r++)o[r].checked=!0},radioSelector:function(e,n){for(var i=e.name,o=t(e.form).find("input:radio[name='"+i+"']"),r=0,a=o.length;r<a;r++){var s=o[r];s.value===n&&(s.checked=!0)}},textarea:function(t,e){t.value=e},select:function(t,e){return i["select-one"===t.type?"selectOne":"selectMany"](t,e)},selectOne:function(t,e){t.value=e},selectMany:function(t,e){var n,i,o=0,r=0;if(e instanceof Array){for(n=e.length;r<n;r++)for(n=t.options.length;o<n;o++)if((i=t.options[o]).value===decodeURIComponent(e[r])){i.selected=!0;break}}else for(o=0,n=t.options.length;o<n;o++)if((i=t.options[o]).value===decodeURIComponent(e)){i.selected=!0;break}}};c(e);var o,r,a,s=e.find(":input"),l={},u=[];n.forEach(function(e){void 0===l[e.name]&&(l[e.name]=[]),l[e.name].push(e.value),u=s.toArray().filter(function(n){return t(n).attr("name")===e.name}),a=l[e.name].length-1,r=u[a],o=r.tagName.toLowerCase(),i[o](r,e.value)})},u.History={formData:function(){if(-1===document.location.href.search(/\?uuid=/))return null;var t=window.History&&window.History.getState();return t&&t.data&&t.data.formInnerHTML?t.data:null},persistFormState:function(t){var e=window.History;if(e&&e.enabled){var n=t.find("[data-form-data]").data("form-data"),i=Object.assign({formData:t.serializeArray(),formInnerHTML:t.not(".no-persist-html").html()},n);e.replaceState(i,"","?uuid="+String((new Date).getTime())+"_"+String(Math.floor(1e5*Math.random()+1)))}},restoreFormStateEvent:"restoreFormState",restoreFormState:function(t){var e=this.formData();e&&(t.html(e.formInnerHTML),u.Form.deserialize(t,e.formData),t[0].dispatchEvent(new CustomEvent(this.restoreFormStateEvent,{detail:e})))},persistSelectionState:function(t){var e=window.History;if(e&&e.enabled){var n=this.restoreHandlerState();e.pushState({unselectedRows:t,selectionHandler:n},"","?selections="+t)}},persistHandlerState:function(t){var e=window.History;e&&e.enabled&&e.pushState({selectionHandler:t},"","?selections="+t)},restoreSelectionState:function(t){var e=window.History&&window.History.getState();return e&&e.data&&e.data.unselectedRows&&!t?e.data.unselectedRows:[]},restoreHandlerState:function(){var t=window.History&&window.History.getState();if(t&&t.data&&t.data.selectionHandler)return t.data.selectionHandler}},u.disable=function(t){t.hasClass("disabled")||(t.addClass("disabled"),t.off("click",t.data("onClickHandler")))},u.enable=function(t){t.hasClass("disabled")&&(t.removeClass("disabled"),t.on("click",t.data("onClickHandler")))},u.makeDisableable=function(t,e,n){0!==t.length&&(t.data("onClickHandler",e),!0===n?t.on("click",e):!1===n&&u.disable(t))},u.AccessManager=function(t){this.removeLinkHTML=t},u.AccessManager.prototype.addProject=function(){if(""!==this.getSelectedOption().val()){t("#deleteWarning").hide();var e={id:this.getSelectElement().val(),name:this.getSelectedOption().text()},n=t("<input>").attr({type:"hidden",name:"project_ids[]"}).val(e.id),i=t("<td>").text(e.name).append(n),o=t("<td>").addClass("actions").html(this.removeLinkHTML);this.addProjectDataToLink(o.find("a"),e);var r=t("<tr>").append(i).append(o);t("#addProjectRow").before(r),this.getSelectedOption().remove(),this.synchAdditionState()}},u.AccessManager.prototype.removeProject=function(e){var n={id:(e=t(e)).data("projectId"),name:e.data("projectName")},i=this.buildProjectOption(n);if(this.getSelectElement()){var o=this.getSelectElement().find("option").filter(function(t,e){return""!==e.value&&e.text.toLowerCase()>n.name.toLowerCase()}).first();0===o.length?this.getSelectElement().append(i):o.before(i)}this.synchAdditionState();var r=t("#projects");e.closest("tr").remove(),(this.getSelectElement().length>0&&1===r.children().length||0===r.children().length)&&t("#deleteWarning").show()},u.AccessManager.prototype.synchAdditionState=function(){0!==this.getSelectElement().length&&(this.getSelectElement().find("option").length<=1?(this.getSelectElement().hide(),t("#noMoreProjectsMessage").show()):(t("#noMoreProjectsMessage").hide(),this.getSelectElement().show()))},u.AccessManager.prototype.setUpForm=function(){this.getSelectElement().on("change",function(){this.addProject()}.bind(this)),this.synchAdditionState()},u.AccessManager.prototype.getSelectElement=function(){return t("#newProjectDroplist")},u.AccessManager.prototype.getSelectedOption=function(){return this.getSelectElement().find("option:selected")},u.AccessManager.prototype.buildProjectOption=function(t){return new Option(t.name,t.id)},u.AccessManager.prototype.addProjectDataToLink=function(t,e){t.data({projectId:e.id,projectName:e.name}),t.attr("data-project-id",e.id)},u.deleteResourceClicked=function(e){window.showContainerTab("resource-projects",i.map(t("#content").find(".container-tab"),i.property("id"))),t("#deleteInstructions-"+e).show(),t("#resource-projects-container .edit_project_associations_link").each(function(t,e){e.innerHTML=e.innerHTML.replace("Add or remove access","Remove access")})},window.retoggleParameterConstraints=function(e,n){i.each(e,function(e){i.each(n,function(n){t("#dose_response_plot_"+e+"_"+n+"_fit_type").trigger("change")})})},u.ModalOverlay={show:function(){t("#modal-overlay").show(),t(document.body).addClass("modal-open"),t("#modal-dialog").show()},hide:function(){t("#modal-dialog").hide(),t(document.body).removeClass("modal-open"),t("#modal-overlay").hide()}},u.Messages={setupNotificationSectionUpdate:function(e){var n=t("#message_project_id");n.on("change",function(){""===n.val()?t("#notifications").fadeOut():t.ajax(e,{async:!0,dataType:"script",data:{project_id:n.val()}})})}},u.setupCalendarFields=function(){t("[data-datepicker-format]").not(".hasDatepicker").each(function(e,n){t(n).datepicker({dateFormat:"yy-mm-dd",showOn:"button",buttonImage:a.default,buttonImageOnly:!0,showOtherMonths:!0,selectOtherMonths:!0,changeYear:!0}).datepicker("option","dateFormat",t(n).data("datepickerFormat"))})},t(u.setupCalendarFields),t(document).on("click",".registration-system-edit",function(){return showEditPanel("registrationSystem","registrationSystem-edit-form"),!1}),t(document).on("click","#newColumnLink",function(){return showDialog("addAColumn-dialog","virtualHeaderForm"),!1}),t(document).on("click","#registrationSystem-edit .cancel",function(){return hideEditPanel("registrationSystem"),!1}),t(document).on("click","#sortable_batch_field_definitions .orcancel .cancel",function(){hideEditPanel("batchFieldDefinitions")}),t(document).on("change",".dose-response-fit-type select",function(){(function(){var e=t(this).closest("tr").find(".upper-value"),n=t(this).closest("tr").find(".lower-value"),i=t(this).closest("tr").find(".default-value"),o=t(this).find("option:selected").html();"default"===o?(e.hide(),n.hide(),i.show()):"best fit"===o?(e.hide(),n.hide(),i.show()):"from"===o?(e.show(),n.show(),i.hide()):(e.hide(),n.show(),i.hide())}).call(this)}),t(document).on("change","#newUpload-file input[type='file']",function(){t("#data_file_errors").fadeOut(),t("#data_file_unparseable").fadeOut(),t("#data_file_too_large").fadeOut(),f(t(this),t("#data_file_invalid_extension"))}),t(document).on("change","[name='snapshot[collaboration_ids][]']",function(){t("#snapshot_share_with_entire_community").prop("checked",!1)}),t(document).on("change","#snapshot_share_with_entire_community",function(){var e,n;e=t(this),n=e.prop("checked"),d(e.closest("form")[0],!1),e.prop("checked",n)}),t(document).on("click",".flag-readout",function(){t(this).closest(".flaggable").toggleClass("flagged"),t(this).nextAll("input").each(function(e,n){var i=t(n).val();t(n).val("0"==i||"false"==i?"1":"0")})}),t(document).on("ajax:success","#shareDialog-message",function(t,e){window.CDD.ShareDialog.afterMessageSubmission(e)}),t(document).on("click",function(e){0===t(".user-dropdown").has(e.target).length&&(t(".user-dropdown").hide(),t(".username-tab a").removeClass("selected"))}),t(document).on("click",".username-tab a",function(e){return t(".user-dropdown").is(":visible")?(t(".user-dropdown").hide(),t(".username-tab a").removeClass("selected")):(t(".user-dropdown").show(),t(".username-tab a").addClass("selected")),!1}),t(document).on("click",".user-dropdown",function(e){t(".user-dropdown").hide(),t(".username-tab a").removeClass("selected")})}).call(e,n(12),n(23))},6903:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.jQuery=e.$=void 0;var o=s(n(12)),r=s(n(6904));n(171),n(6906),n(6907),n(612);var a=s(n(294));function s(t){return t&&t.__esModule?t:{default:t}}t.$=t.jQuery=o.default,o.default.browser=r.default,e.$=i,e.jQuery=o.default,e.default=o.default,o.default.ajaxPrefilter(function(t){t.url&&(t.url=(0,a.default)(t.url))})}).call(e,n(31),n(12))},6904:function(t,e,n){t.exports=n(6905)},6905:function(t,e){var n,i,o=function(t){t=t.toLowerCase();var e=/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=/(ipad)/.exec(t)||/(iphone)/.exec(t)||/(android)/.exec(t)||/(windows phone)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/i.exec(t)||[];return{browser:e[3]||e[1]||"",version:e[2]||"0",platform:n[0]||""}};if(n=o(window.navigator.userAgent),(i={}).uaMatch=o,n.browser&&(i[n.browser]=!0,i.version=n.version,i.versionNumber=parseInt(n.version)),n.platform&&(i[n.platform]=!0),(i.android||i.ipad||i.iphone||i["windows phone"])&&(i.mobile=!0),(i.cros||i.mac||i.linux||i.win)&&(i.desktop=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv){n.browser="msie",i.msie=!0}if(i.opr){n.browser="opera",i.opera=!0}if(i.safari&&i.android){n.browser="android",i.android=!0}i.name=n.browser,i.platform=n.platform,t.exports=i},6906:function(t,e,n){"use strict";(function(t){t.fn.focusFirst=function(){return this.find(":focusable:not(a):not(button):not(object):not(select)").first().focus()}}).call(e,n(12))},6907:function(t,e,n){(function(t){!function(t,e){"use strict";var n;void 0!==t.rails&&t.error("jquery-ujs has already been loaded!");var i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=n.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),!1!==o.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return void 0!==t.data("remote")&&!1!==t.data("remote")},handleRemote:function(e){var i,o,r,a,s,l;if(n.fire(e,"ajax:before")){if(a=e.data("with-credentials")||null,s=e.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,e.is("form")){i=e.data("ujs:submit-button-formmethod")||e.attr("method"),o=e.data("ujs:submit-button-formaction")||e.attr("action"),r=t(e[0]).serializeArray();var u=e.data("ujs:submit-button");u&&(r.push(u),e.data("ujs:submit-button",null)),e.data("ujs:submit-button-formmethod",null),e.data("ujs:submit-button-formaction",null)}else e.is(n.inputChangeSelector)?(i=e.data("method"),o=e.data("url"),r=e.serialize(),e.data("params")&&(r=r+"&"+e.data("params"))):e.is(n.buttonClickSelector)?(i=e.data("method")||"get",o=e.data("url"),r=e.serialize(),e.data("params")&&(r=r+"&"+e.data("params"))):(i=e.data("method"),o=n.href(e),r=e.data("params")||null);return l={type:i||"GET",data:r,dataType:s,beforeSend:function(t,i){if(void 0===i.dataType&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),!n.fire(e,"ajax:beforeSend",[t,i]))return!1;e.trigger("ajax:send",t)},success:function(t,n,i){e.trigger("ajax:success",[t,n,i])},complete:function(t,n){e.trigger("ajax:complete",[t,n])},error:function(t,n,i){e.trigger("ajax:error",[t,n,i])},crossDomain:n.isCrossDomain(o)},a&&(l.xhrFields={withCredentials:a}),o&&(l.url=o),n.ajax(l)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host===n.protocol+"//"+n.host)}catch(t){return!0}},handleMethod:function(e){var i=n.href(e),o=e.data("method"),r=e.attr("target"),a=n.csrfToken(),s=n.csrfParam(),l=t('<form method="post" action="'+i+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';void 0===s||void 0===a||n.isCrossDomain(i)||(u+='<input name="'+s+'" value="'+a+'" type="hidden" />'),r&&l.attr("target",r),l.hide().append(u).appendTo("body"),l.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",void 0!==(n=t.data("disable-with"))&&(t.data("ujs:enable-with",t[e]()),t[e](n)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";void 0!==t.data("ujs:enable-with")&&(t[e](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,i=t.data("confirm"),o=!1;if(!i)return!0;if(n.fire(t,"confirm")){try{o=n.confirm(i)}catch(t){(console.error||console.log).call(console,t.stack||t)}e=n.fire(t,"confirm:complete",[o])}return o&&e},blankInputs:function(e,n,i){var o,r,a,s=t(),l=n||"input,textarea",u={};return e.find(l).each(function(){(o=t(this)).is("input[type=radio]")?(a=o.attr("name"),u[a]||(0===e.find('input[type=radio]:checked[name="'+a+'"]').length&&(r=e.find('input[type=radio][name="'+a+'"]'),s=s.add(r)),u[a]=a)):(o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===i&&(s=s.add(o))}),!!s.length&&s},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");void 0!==e&&(t.data("ujs:enable-with",t.html()),t.html(e)),t.bind("click.railsDisable",function(t){return n.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){void 0!==t.data("ujs:enable-with")&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),i.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(t(this))}),i.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(t(this))}),i.on("click.rails",n.linkClickSelector,function(e){var i=t(this),o=i.data("method"),r=i.data("params"),a=e.metaKey||e.ctrlKey;if(!n.allowAction(i))return n.stopEverything(e);if(!a&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(a&&(!o||"GET"===o)&&!r)return!0;var s=n.handleRemote(i);return!1===s?n.enableElement(i):s.fail(function(){n.enableElement(i)}),!1}return o?(n.handleMethod(i),!1):void 0}),i.on("click.rails",n.buttonClickSelector,function(e){var i=t(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return!1===o?n.enableFormElement(i):o.fail(function(){n.enableFormElement(i)}),!1}),i.on("change.rails",n.inputChangeSelector,function(e){var i=t(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.on("submit.rails",n.formSubmitSelector,function(e){var i,o,r=t(this),a=n.isRemote(r);if(!n.allowAction(r))return n.stopEverything(e);if(void 0===r.attr("novalidate"))if(void 0===r.data("ujs:formnovalidate-button")){if((i=n.blankInputs(r,n.requiredInputSelector,!1))&&n.fire(r,"ajax:aborted:required",[i]))return n.stopEverything(e)}else r.data("ujs:formnovalidate-button",void 0);if(a){if(o=n.nonBlankInputs(r,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(r)},13);var s=n.fire(r,"ajax:aborted:file",[o]);return s||setTimeout(function(){n.enableFormElements(r)},13),s}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.on("click.rails",n.formInputClickSelector,function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null,a=i.closest("form");0===a.length&&(a=t("#"+i.attr("form"))),a.data("ujs:submit-button",r),a.data("ujs:formnovalidate-button",i.attr("formnovalidate")),a.data("ujs:submit-button-formaction",i.attr("formaction")),a.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.on("ajax:send.rails",n.formSubmitSelector,function(e){this===e.target&&n.disableFormElements(t(this))}),i.on("ajax:complete.rails",n.formSubmitSelector,function(e){this===e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(t)}).call(e,n(12))},6908:function(t,e,n){"use strict";(function(t){var e,i=n(152),o=(e=i)&&e.__esModule?e:{default:e};document.addEventListener("DOMContentLoaded",function(){var e=t.rails.csrfToken();o.default.defaults.headers.common["X-CSRF-Token"]=e})}).call(e,n(12))},6909:function(t,e,n){"use strict";(function(t){var e,i,o,r=n(89),a=(e=r)&&e.__esModule?e:{default:e};function s(t,e,n){var i=t.closest("tr"),o=i.find(".file"),r=o.find(".filePreview"),a=i.find(".noSelectedFile");r.remove(),o.prepend(e),t.val(n),o.show(),a.hide()}"undefined"===typeof window.CDD&&(window.CDD={}),window.removeReadoutFile=function(e){var n=t(e).closest(".file"),i=n.next(".noSelectedFile");n.prev("input").val(""),n.hide(),i.show()},window.openSingleFileSelector=function(){var e=t(this).data("selectSingleFilesPath"),n=t(this).closest("tr").find("input"),i=n.val(),o=e+"?target_input_id="+n.attr("id")+"&id="+i,r=window.open(o,"fileselector","width=700,height=500,scrollbars=yes,menubar=no,status=no,directories=no,location=no,toolbar=no");r.__isChildWindow=!0,r.focus()},window.processSingleFileSelection=function(e,n){var i=t("#"+n);null!==i&&t(e).find(":radio[name='files[]']").each(function(){var e=t(this);e.prop("checked")&&s(i,e.val(),e.data("fileId"))})},i=function(){var e=t(this);if(!e.data("fileUploaderSetup")){var n=e.parents("tr"),i=n.find(".fileUpload"),o=i.find(".status"),r=n.find(".file"),l=n.find(".noSelectedFile"),u=e.parents("form"),c=n.find("input").filter(function(){return"file"!==this.type});new a.default.FineUploaderBasic({button:e[0],request:{endpoint:e.attr("data-upload-endpoint"),params:{format:"json",authenticity_token:t.rails.csrfToken()}},callbacks:{onSubmit:function(t,e){u[0].disableSubmit(),r.hide(),l.hide(),o.text(""),i.show()},onUpload:function(t,e){o.html("Uploading \u201c"+e.escapeHTML()+"\u201d")},onProgress:function(t,e,n,i){if(n<i){var r=Math.round(n/i*100)+"% of "+Math.round(i/1024)+" kB";o.html("Uploading \u201c"+e.escapeHTML()+"\u201d: "+r)}else o.html("Saving \u201c"+e.escapeHTML()+"\u201d")},onComplete:function(t,e,n){i.hide(),n.success?n.reload_page?window.location.reload():s(c,n.file_preview.unescapeHTML(),n.uploaded_file_id):(l.show(),alert("Something went wrong: "+n)),u[0].enableSubmit()},onError:function(t,e,n,o){i.hide(),l.show(),alert("Something went wrong: "+n)}}}),e.data("fileUploaderSetup",!0)}},o=window.CDD.Form.setupNewForms,window.CDD.Form.setupNewForms=function(){o(),t(".readoutFileUploader").each(i)}}).call(e,n(12))},6910:function(t,e,n){"use strict";(function(t){var e,i,o,r=n(89),a=(e=r)&&e.__esModule?e:{default:e};window.openAssociatedFileSelector=function(){var e=t(this),n=e.data("selectAssociatedFilesPath"),i=e.closest("form").find("input:hidden[name$='[file_ids_to_attach][]']").toArray().filter(function(t){return t.value.length>0}).map(function(t){return t.value}),o=n+"?prefix="+e.data("prefix")+"&ids="+i.join(","),r=window.open(o,"fileselector","width=700,height=500,scrollbars=yes,menubar=no,status=no,directories=no,location=no,toolbar=no");r.__isChildWindow=!0,r.focus()},window.processAssociatedFileSelections=function(e){t(e).find("input:checkbox[name='files[]']").toArray().forEach(function(e){e.checked&&t(".files .controls").first().before(e.value.unescapeHTML()).prev().children().effect("highlight")})},i=function(e){if(!(e=t(e)).data("associated-fileuploader-setup")){var n=e.find(".uploadButton"),i=e.attr("data-upload-endpoint"),o=e.find(".template tr"),r=e.find(".files .controls"),s=e.parents("form"),l=e.find(".errorMessage"),u=s.find("select#message_project_id"),c=function(t){return function(){0!==t.getInProgress()||u&&""===u.val()?s[0].disableSubmit():s[0].enableSubmit()}},d=[],h=new a.default.FineUploaderBasic({button:n[0],request:{endpoint:i,params:{format:"json",authenticity_token:t.rails.csrfToken()}},callbacks:{onSubmit:function(e,n){c(this)(),d[e]=new function(t,e){var n=o.clone(),i=n.find(".status"),r=n.find("progress");e.before(n),this.updateProgress=function(t,e){t&&e&&(r.attr("max",e),r.attr("value",t))},this.updateStatus=function(e){i.html("Uploading "+t.escapeHTML())},this.updateView=function(t){n.replaceWith(t.unescapeHTML())}}(n,r),d[e].updateStatus("Uploading "+n),t(l).hide()},onUpload:function(t,e){d[t].updateStatus("Uploading "+e)},onProgress:function(t,e,n,i){d[t].updateStatus("Uploading "+e),d[t].updateProgress(n,i)},onComplete:function(t,e,n){n.reload_page?window.location.reload():d[t].updateView(n.file_preview),c(this)()},onError:function(e,n,i,o){c(this)(),l.html(i.escapeHTML()),t(l).show()}}});u&&u.on("change",c(h)),void 0!==document.createElement("progress").max&&t(e).addClass("progress-supported"),e.data("associated-fileuploader-setup",!0)}},o=CDD.Form.setupNewForms,CDD.Form.setupNewForms=function(){o(),t(".associatedFileUploader").toArray().forEach(i)}}).call(e,n(12))},6911:function(t,e,n){"use strict";(function(t){var e;n(171),String.prototype.format=function(){for(var t=this,e=arguments.length;e--;)t=t.replace(new RegExp("\\{"+e+"\\}","gm"),arguments[e]);return t},(e=t).timeoutDialog=function(t){var n={timeout:1200,countdown:60,title:"Your session is about to expire!",message:"You will be logged out in {0} seconds.",question:"Do you want to stay signed in?",keep_alive_button_text:"Yes, keep me signed in",sign_out_button_text:"No, sign me out",keep_alive_url:"/keep-alive",logout_url:null,logout_redirect_url:"/",session_timeout_url:"/session-timeout",restart_on_yes:!0,dialog_width:350,timer_interval:1};e.extend(n,t),{init:function(){this.setupDialogTimer()},setupDialogTimer:function(){var t=this,e=1e3*n.timer_interval,i=Date.now()+1e3*n.timeout,o=i-1e3*n.countdown,r=function(){i<=Date.now()?t.refreshSessionTimeout(t.signOut,!1):o<=Date.now()&&t.refreshSessionTimeout(t.setupDialog)};r(),window.clearInterval(this.timerWatcher),this.timerWatcher=window.setInterval(r,e)},refreshSessionTimeout:function(t,i){var o=this;window.clearInterval(o.timerWatcher),e.get(n.session_timeout_url).done(function(e){var r=Number(e);r>n.countdown?(n.timeout=r,o.setupDialogTimer()):t(o,i)}).fail(function(){o.setupDialogTimer()})},setupDialog:function(t){var i=t;window.clearInterval(i.timerWatcher),i.destroyDialog(),e('<div id="timeout-dialog"><p id="timeout-message">'+n.message.format('<span id="timeout-countdown">'+n.countdown+"</span>")+'</p><p id="timeout-question">'+n.question+"</p></div>").appendTo("body").dialog({modal:!0,width:n.dialog_width,minHeight:"auto",zIndex:1e4,closeOnEscape:!1,draggable:!1,resizable:!1,dialogClass:"timeout-dialog",title:n.title,buttons:{"keep-alive-button":{text:n.keep_alive_button_text,id:"timeout-keep-signin-btn",click:function(){i.keepAlive()}},"sign-out-button":{text:n.sign_out_button_text,id:"timeout-sign-out-button",click:function(){i.signOut(i,!0)}}}}),i.startCountdown()},destroyDialog:function(){e("#timeout-dialog").length&&(e("#timeout-dialog").dialog("close"),e("#timeout-dialog").remove())},startCountdown:function(){var t=this,i=n.countdown;this.countdown=window.setInterval(function(){i-=1,e("#timeout-countdown").html(i),i<=0&&(window.clearInterval(t.countdown),t.destroyDialog(),t.refreshSessionTimeout(t.signOut,!1))},1e3)},keepAlive:function(){var t=this;this.destroyDialog(),window.clearInterval(this.countdown),e.get(n.keep_alive_url,function(e){"OK"==e?n.restart_on_yes&&t.setupDialogTimer():t.signOut(!1)})},signOut:function(t,i){var o=t;null!=n.logout_url?e.post(n.logout_url,{_method:"delete"},function(){o.redirectLogout(i)}):o.redirectLogout(i)},redirectLogout:function(t){var e=n.logout_redirect_url+"?redirect_url="+encodeURIComponent(window.location.pathname+window.location.search);t||(e+="&timeout=t"),window.location=e}}.init()}}).call(e,n(12))}},[6867]);
//# sourceMappingURL=application-2e608ac0d1671ffd6c71.js.map